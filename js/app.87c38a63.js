(function(e){function t(t){for(var s,o,r=t[0],l=t[1],c=t[2],d=0,m=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},n={app:0},i=[];function o(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"a6f07644"}[e]+".js"}function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(e){var t=[],a=n[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,s){a=n[e]=[t,s]}));t.push(a[2]=s);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=o(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(d);var a=n[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+i+")",c.name="ChunkLoadError",c.type=s,c.request=i,a[1](c)}n[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"043c":function(e,t,a){"use strict";var s=a("beb3"),n=a.n(s);n.a},1384:function(e,t,a){"use strict";var s=a("e533"),n=a.n(s);n.a},1387:function(e,t,a){},"1c59":function(e){e.exports=JSON.parse('[{"title":"Running Assignment","access":true,"totalMark":10,"modelAnswerPeriod":0,"questions":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/assignments/Questions.pdf","modelAnswer":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/assignments/Answers.pdf","hash":"CURRENT","submission":{"userID":1,"assignmentID":1,"graded":true,"mark":9,"feedback":"Wrong Questions: Q2(2)","file":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/assignments/user_answer.pdf"}},{"title":"Overdue Assignment","CreatedAt":"2021-05-01T00:00:00.000Z","deadline":"2021-05-10T00:00:00.000Z","access":true,"totalMark":15,"modelAnswerPeriod":0,"questions":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/assignments/Questions.pdf","modelAnswer":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/assignments/Answers.pdf","hash":"OVERDUE","submission":{"userID":1,"assignmentID":1,"graded":true,"mark":7,"uploadedAt":"2021-05-20T00:00:00.000Z","feedback":"Wrong Questions: Q2(2) & Late turn-in","file":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/assignments/user_answer.pdf"}},{"title":"Inaccessible","CreatedAt":"2021-03-01T00:00:00.000Z","deadline":"2021-03-01T00:00:00.000Z","access":false}]')},2845:function(e,t,a){"use strict";var s=a("8856"),n=a.n(s);n.a},"2de0":function(e,t,a){"use strict";var s=a("c0bc"),n=a.n(s);n.a},"3a06":function(e,t,a){},"44f5":function(e,t,a){"use strict";var s=a("e34b"),n=a.n(s);n.a},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Snackbar"),a("router-view"),e.isLoggedIn?e._e():a("v-snackbar",{attrs:{timeout:-1,value:!0,left:"",shaped:"",bottom:"","multi-line":"",vertical:"",color:"warning"}},[e._v(" N.B. You're not logged in and all of this data is for DEMONSTRATION purposes only. You can login/register from the top right corner of the screen ")]),e.isLoggedIn?e._e():a("div",{staticStyle:{height:"85px"}})],1)},i=[],o=a("5530"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("v-snackbar",{attrs:{top:!0,color:e.color,dark:!0},scopedSlots:e._u([{key:"action",fn:function(t){var s=t.attrs;return[a("v-btn",e._b({attrs:{text:""},on:{click:function(t){return e.updateVisible(!1)}}},"v-btn",s,!1),[e._v("Close")])]}}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(" "+e._s(e.text)+" ")])],1)},l=[],c=a("2f62"),d={name:"Snackbar",computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({text:"text",color:"color"})),{},{visible:{get:function(){return this.$store.state.visible},set:function(e){this.updateVisible(e)}}}),methods:{updateVisible:function(e){this.$store.state.visible=e}}},u=d,m=a("2877"),v=a("6544"),p=a.n(v),h=a("8336"),f=a("2db4"),g=Object(m["a"])(u,r,l,!1,null,null,null),b=g.exports;p()(g,{VBtn:h["a"],VSnackbar:f["a"]});var _={components:{Snackbar:b},computed:Object(o["a"])({},Object(c["b"])(["isLoggedIn"]))},w=_,D=a("7496"),y=Object(m["a"])(w,n,i,!1,null,null,null),x=y.exports;p()(y,{VApp:D["a"],VSnackbar:f["a"]});var k=a("f309");s["a"].use(k["a"]);var V=new k["a"]({}),C=(a("d3b7"),a("8c4f")),T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Announcements"}}),a("v-main",[a("v-container",[e._l(e.announcements,(function(t){return a("Announcement",{key:t.ID,attrs:{announcement:t,"placeholder-exists":e.placeholderExists},on:{"update:placeholderExists":function(t){e.placeholderExists=t},"update:placeholder-exists":function(t){e.placeholderExists=t},deleteAnnouncement:e.deleteAnnouncement,updateAnnouncements:e.updateAnnouncements}})})),a("BottomPagination",{attrs:{length:e.totalPages,page:e.options.page},on:{"update:page":function(t){return e.$set(e.options,"page",t)}}}),e.userData.admin?a("v-speed-dial",{attrs:{fixed:"",bottom:"",right:"",direction:"top"},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.fab?a("v-icon",[e._v("mdi-close")]):a("v-icon",[e._v("mdi-account-circle")])],1)]},proxy:!0}],null,!1,3138056355),model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"green"},on:{click:function(t){e.sheet=!0}}},[a("v-icon",[e._v("mdi-magnify")])],1),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"indigo"},on:{click:e.createPlaceholder}},[a("v-icon",[e._v("mdi-plus")])],1)],1):e.isLoggedIn?a("v-btn",{attrs:{fixed:"",dark:"",fab:"",right:"",bottom:"",color:"primary"},on:{click:function(t){e.sheet=!0}}},[a("v-icon",[e._v("mdi-magnify")])],1):e._e(),a("div",{staticStyle:{height:"10px"}}),e.isLoggedIn?a("v-bottom-sheet",{attrs:{inset:""},model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[a("Search",{on:{closeSearchSheet:function(t){e.sheet=!1},search:e.filterAnnouncements}})],1):e._e()],2)],1)],1)},S=[],z=(a("c975"),a("a434"),a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{elevation:"5"}},[e.editMode?a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("TextField",{attrs:{value:e.updatedAnnouncement.title,label:"Title","pre-icon":"mdi-format-text"},on:{"update:value":function(t){return e.$set(e.updatedAnnouncement,"title",t)}}})],1)],1):a("v-row",[a("v-col",[a("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.updatedAnnouncement.title)+" "),a("v-spacer"),a("div",[e.updatedAnnouncement.isNew?e._e():a("div",{staticClass:"text-body-1"},[e._v(" "+e._s(e.updatedAnnouncement.CreatedAt.substring(0,10))+" ")])])],1)],1)],1),e.editMode?a("TextField",{attrs:{value:e.updatedAnnouncement.topic,label:"Topic","pre-icon":"mdi-subtitles"},on:{"update:value":function(t){return e.$set(e.updatedAnnouncement,"topic",t)}}}):a("v-card-subtitle",[e._v(e._s(e.updatedAnnouncement.topic))]),e.editMode?a("TextArea",{attrs:{value:e.updatedAnnouncement.content,label:"Content","pre-icon":"mdi-text",rows:3},on:{"update:value":function(t){return e.$set(e.updatedAnnouncement,"content",t)}}}):a("v-card-text",{staticClass:"text-left text--primary"},[e._v(e._s(e.updatedAnnouncement.content))]),e.userData.admin?a("v-card-actions",[e.editMode?a("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.pushAnnouncement}},[e._v("Save")]):a("v-btn",{attrs:{color:"primary"},on:{click:e.changeEditMode}},[e._v("Edit")]),e.editMode?a("v-btn",{attrs:{color:"secondary"},on:{click:e.cancelChanges}},[e._v("Cancel")]):e._e(),a("v-spacer"),this.new?e._e():a("ConfirmationDialog",{attrs:{buttonText:"Delete",mainText:"Delete This Item?",message:"You won't be able to restore the deleted announcement"},on:{confirm:e.deleteAnnouncement}})],1):e._e()],1)],1)}),q=[],P=a("bc3a"),I=a.n(P),A=(a("b0c0"),a("0e44"));s["a"].use(c["a"]);var j=new c["a"].Store({state:{visible:!1,text:"",color:"",userData:{admin:!1,name:"",token:""},isLoggedIn:!1,classes:{values:[],selectedClass:0}},plugins:[Object(A["a"])({paths:["userData","classes","isLoggedIn"]})],mutations:{VIEW_SUCCESS_SNACKBAR:function(e,t){e.color="success",e.text=t,e.visible=!0},VIEW_ERROR_SNACKBAR:function(e,t){e.color="error",e.text=t,e.visible=!0},SET_USER_DATA:function(e,t){e.userData.name=t.name,e.userData.admin=t.admin,e.userData.token=t.token},SET_USER_CLASS:function(e,t){e.classes.selectedClass=t,e.classes.values.length>0&&(e.userData.admin=e.classes.values[e.classes.selectedClass].admin)},SET_USER_CLASSES:function(e,t){e.classes.values=t},SET_IS_LOGGED_IN:function(e,t){e.isLoggedIn=t}},actions:{viewSuccessSnackbar:function(e,t){var a=e.commit;a("VIEW_SUCCESS_SNACKBAR",t)},viewErrorSnackbar:function(e,t){var a=e.commit;a("VIEW_ERROR_SNACKBAR",t)},setUserData:function(e,t){var a=e.commit;a("SET_USER_DATA",t)},setUserClass:function(e,t){var a=e.commit;a("SET_USER_CLASS",t)},setUserClasses:function(e,t){var a=e.commit;a("SET_USER_CLASSES",t)},setIsLoggedIn:function(e,t){var a=e.commit;a("SET_IS_LOGGED_IN",t)}},modules:{}}),O="https://remote-tutorr.ddns.net",E=I.a.create({baseURL:O});E.interceptors.request.use((function(e){var t=j.state.userData.token;if(e.headers.Authorization="Bearer ".concat(t),j.state.classes.values.length>0){var a=j.state.classes.selectedClass;e.params||(e.params={}),e.params["selectedClass"]=j.state.classes.values[a].classHash}return e}),(function(e){return Promise.reject(e)})),E.interceptors.response.use((function(e){return void 0!==e.data.message&&j.dispatch("viewSuccessSnackbar",e.data.message),e}),(function(e){return console.log(e),void 0!==e.response.data.message&&j.dispatch("viewErrorSnackbar",e.response.data.message),void 0!==e.response.data.route&&Wo.push({name:e.response.data.route}),Promise.reject(e)}));var Q=E,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([e.datatable||e.videoCode||e.userWatch?{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",n,!1),s),[e._v("mdi-delete")])]}}:e.videoPart?{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-btn",{attrs:{icon:""}},[a("v-icon",e._g(e._b({},"v-icon",n,!1),s),[e._v("mdi-delete-forever")])],1)]}}:e.video?{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{outlined:"",color:"red"}},"v-btn",n,!1),s),[e._v("Delete")])]}}:e.adminStatus?{key:"activator",fn:function(t){var s=t.on;return[a("v-tooltip",e._g({attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{small:"",fab:"",text:""}},Object.assign({},s,n)),[a("v-icon",[e._v("mdi-account-switch-outline")])],1)]}}],null,!0)},s),[a("span",[e._v("Change Admin Status")])])]}}:{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:e.btnColor||"error",dark:""}},"v-btn",n,!1),s),[e._v(e._s(e.buttonText))])]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("Confirmation")]),a("v-card-text",[e._v(e._s(e.mainText))]),e._t("main-content"),a("v-card-subtitle",[e._v(e._s(e.message))]),e.video||e.videoPart?a("v-card-text",[a("strong",[e._v("You must verify the item name ("),a("i",[e._v(e._s(e.deletedItemName))]),e._v(") - without the parentheses - before deleting")]),a("v-text-field",{attrs:{label:"Deleted Item Name"},model:{value:e.typedValue,callback:function(t){e.typedValue=t},expression:"typedValue"}})],1):e.videoCode?a("v-card-text",[a("strong",[e._v("You must verify the user's full name ("),a("i",[e._v(e._s(e.deletedItemName))]),e._v(") - without the parentheses - before confirming")]),a("v-text-field",{attrs:{label:"User's Full Name"},model:{value:e.typedValue,callback:function(t){e.typedValue=t},expression:"typedValue"}})],1):e.userWatch?a("v-card-text",[a("strong",[e._v("You must verify the user's full name ("),a("i",[e._v(e._s(e.deletedItemName))]),e._v(") AND video part name ("),a("i",[e._v(e._s(e.secondConfirmName))]),e._v(")")]),a("v-text-field",{attrs:{label:"User's Full Name"},model:{value:e.typedValue,callback:function(t){e.typedValue=t},expression:"typedValue"}}),a("v-text-field",{attrs:{label:"Video Part Name"},model:{value:e.secondConfirmTypesValue,callback:function(t){e.secondConfirmTypesValue=t},expression:"secondConfirmTypesValue"}})],1):e._e(),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.hideDialog}},[e._v("Cancel")]),a("v-spacer"),e.video||e.videoPart||e.videoCode?a("v-btn",{attrs:{color:"error",text:"",disabled:e.deletedItemName!==e.typedValue},on:{click:e.confirm}},[e._v("Confirm")]):e.userWatch?a("v-btn",{attrs:{color:"error",text:"",disabled:e.deletedItemName!==e.typedValue||e.secondConfirmName!==e.secondConfirmTypesValue},on:{click:e.confirm}},[e._v("Confirm")]):a("v-btn",{attrs:{color:"error",text:""},on:{click:e.confirm}},[e._v("Confirm")])],1)],2)],1)},$=[],N={name:"ConfirmationDialog",props:{buttonText:String,mainText:String,message:String,btnColor:String,datatable:Boolean,video:Boolean,videoPart:Boolean,videoCode:Boolean,userWatch:Boolean,adminStatus:Boolean,deletedItemName:String,secondConfirmName:String},data:function(){return{dialog:!1,typedValue:"",secondConfirmTypesValue:""}},methods:{hideDialog:function(){this.dialog=!1},confirm:function(){this.hideDialog(),this.$emit("confirm",{typedValue:this.typedValue})}}},B=N,L=a("b0af"),U=a("99d9"),F=a("169a"),R=a("ce7e"),Y=a("132d"),G=a("2fa4"),H=a("8654"),W=a("3a2f"),Z=Object(m["a"])(B,M,$,!1,null,null,null),K=Z.exports;p()(Z,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardText:U["c"],VCardTitle:U["d"],VDialog:F["a"],VDivider:R["a"],VIcon:Y["a"],VSpacer:G["a"],VTextField:H["a"],VTooltip:W["a"]});var J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ValidationProvider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{label:e.label,"prepend-icon":e.preIcon,type:"text","error-messages":s},on:{input:function(t){return e.$emit("update:value",t)}},model:{value:e.updatedValue,callback:function(t){e.updatedValue=t},expression:"updatedValue"}})]}}])})},X=[],ee={name:"TextField",props:["value","label","preIcon","rules"],data:function(){return{updatedValue:this.value||""}}},te=ee,ae=Object(m["a"])(te,J,X,!1,null,"84aa0bf6",null),se=ae.exports;p()(ae,{VTextField:H["a"]});var ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ValidationProvider",{attrs:{rules:e.rules},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-textarea",{attrs:{label:e.label,"prepend-icon":e.preIcon,type:"text","error-messages":s,rows:e.rows},on:{input:function(t){return e.$emit("update:value",t)}},model:{value:e.updatedValue,callback:function(t){e.updatedValue=t},expression:"updatedValue"}})]}}])})},ie=[],oe={name:"TextArea",props:["value","label","preIcon","rules","rows"],data:function(){return{updatedValue:this.value||""}}},re=oe,le=a("a844"),ce=Object(m["a"])(re,ne,ie,!1,null,"0b3a2a56",null),de=ce.exports;p()(ce,{VTextarea:le["a"]});var ue={name:"Announcement",components:{TextArea:de,TextField:se,ConfirmationDialog:K},props:["announcement","placeholderExists"],computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["userData","classes"])),{},{selectedClass:function(){return this.classes.values[this.classes.selectedClass].classHash}}),data:function(){return{editMode:!1,updatedAnnouncement:this.announcement||{},new:!1,loading:!1}},methods:{changeEditMode:function(){this.editMode=!this.editMode},cancelChanges:function(){this.updatedAnnouncement.isNew?this.$emit("deleteAnnouncement",this.updatedAnnouncement):(this.changeEditMode(),this.updatedAnnouncement=Object.assign({},this.cachedAnnouncement))},pushAnnouncement:function(){var e=this;this.loading=!0;var t=new FormData;t.append("id",this.updatedAnnouncement.ID),t.append("title",this.updatedAnnouncement.title||""),t.append("topic",this.updatedAnnouncement.topic||""),t.append("content",this.updatedAnnouncement.content||""),t.append("selectedClass",this.selectedClass);var a=this.new?"POST":"PUT";Q({method:a,url:"/admin/announcements",data:t}).then((function(t){e.changeEditMode(),e.updatedAnnouncement=t.data.announcement,e.cachedAnnouncement=Object.assign({},e.updatedAnnouncement),e.$emit("updateAnnouncements",{old:e.announcement,updated:e.updatedAnnouncement,delete:!1}),e.new&&(e.new=!1,e.$emit("update:placeholderExists",!1))})).finally((function(){e.loading=!1}))},deleteAnnouncement:function(){var e=this,t=new FormData;t.append("id",this.updatedAnnouncement.ID),Q({method:"DELETE",url:"/admin/announcements",data:t}).then((function(){e.$emit("deleteAnnouncement",e.updatedAnnouncement)}))}},created:function(){this.updatedAnnouncement.isNew&&(this.new=!0,this.editMode=!0)},mounted:function(){this.cachedAnnouncement=Object.assign({},this.announcement)}},me=ue,ve=(a("2de0"),a("62ad")),pe=a("0fd9"),he=Object(m["a"])(me,z,q,!1,null,null,null),fe=he.exports;p()(he,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VRow:pe["a"],VSpacer:G["a"]});var ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("v-pagination",{attrs:{length:e.length,circle:"","total-visible":"7"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},be=[],_e={name:"BottomNavigation",props:["length","page"],computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}}}},we=_e,De=a("891e"),ye=Object(m["a"])(we,ge,be,!1,null,null,null),xe=ye.exports;p()(ye,{VPagination:De["a"]});var ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("v-sheet",{staticClass:"text-center"},[a("v-text-field",{attrs:{label:"Title","prepend-icon":"mdi-format-text",type:"text"},model:{value:e.searchValues.title,callback:function(t){e.$set(e.searchValues,"title",t)},expression:"searchValues.title"}}),a("v-text-field",{attrs:{label:"Topic",type:"text","prepend-icon":"mdi-subtitles"},model:{value:e.searchValues.topic,callback:function(t){e.$set(e.searchValues,"topic",t)},expression:"searchValues.topic"}}),a("v-text-field",{attrs:{label:"Content",type:"text","prepend-icon":"mdi-text"},model:{value:e.searchValues.content,callback:function(t){e.$set(e.searchValues,"content",t)},expression:"searchValues.content"}}),a("v-btn",{staticClass:"ma-2",attrs:{color:"primary"},on:{click:e.search}},[e._v("Search")]),a("v-btn",{staticClass:"ma-2",attrs:{color:"secondary"},on:{click:e.cancel}},[e._v("Cancel")]),a("v-btn",{staticClass:"ma-2",attrs:{color:"secondary"},on:{click:e.retrieveAll}},[e._v("Retrieve All")])],1)],1)},Ve=[],Ce=(a("ac1f"),a("841c"),{name:"Search",data:function(){return{sheet:!1,searchValues:{title:"",topic:"",content:""}}},computed:Object(o["a"])({},Object(c["b"])(["userData"])),mounted:function(){this.cachedSearchValues=Object.assign({},this.searchValues)},methods:{cancel:function(){this.searchValues=Object.assign({},this.cachedSearchValues),this.$emit("closeSearchSheet")},search:function(){this.$emit("closeSearchSheet"),this.$emit("search",{searchValues:this.searchValues})},retrieveAll:function(){this.searchValues.title="",this.searchValues.topic="",this.searchValues.content="",this.search()}}}),Te=Ce,Se=a("8dd9"),ze=Object(m["a"])(Te,ke,Ve,!1,null,null,null),qe=ze.exports;p()(ze,{VBtn:h["a"],VSheet:Se["a"],VTextField:H["a"]});var Pe=function(){var e=this,t=this,s=t.$createElement,n=t._self._c||s;return n("div",[n("v-app-bar",{attrs:{color:"black",dense:"",dark:"",app:"","clipped-left":""}},[t.$vuetify.breakpoint.mdAndUp?t._e():n("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),n("v-avatar",{attrs:{tile:""}},[n("v-img",{attrs:{src:a("cf05")}})],1),n("v-toolbar-title",[t._v(t._s(t.pageName))]),n("v-spacer"),!t.userData.admin&&t.isLoggedIn?n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{icon:"",large:""},on:{click:function(e){t.dialog=!0}}},a),[n("v-icon",[t._v("mdi-cash")])],1)]}}],null,!1,3817227486)},[n("span",[t._v("Payments")])]):t._e(),t.isLoggedIn?n("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",s,!1),a),[n("v-icon",[t._v("mdi-teach")])],1)]}}],null,!1,1488335326)},[n("v-list",[t._l(t.classes.values,(function(e,a){return n("v-list-item",{key:e.hash,on:{click:function(e){return t.changeSelectedClass(a)}}},[n("v-list-item-title",[a===t.classes.selectedClass?n("v-icon",[t._v("mdi-check")]):t._e(),t._v(" "+t._s(e.class.organization.subject)+" (Mr. "+t._s(e.class.organization.teacherName)+") "+t._s(e.class.name)+" ")],1)],1)})),n("v-list-item",{attrs:{to:{name:"Classes"}}},[n("v-list-item-title",[t._v("View All")])],1)],2)],1):n("v-btn",{attrs:{text:""},on:{click:function(){return e.loginDrawer=!0}}},[t._v("Login")])],1),n("LoginDrawer",{attrs:{"static-open":t.loginDrawer},on:{closedDrawer:function(t){return e.loginDrawer=t.value}}}),n("Drawer",{attrs:{"static-open":t.drawer},on:{closedDrawer:function(t){return e.drawer=t.value}}}),n("Payment",{attrs:{"student-name":t.userData.name,dialog:t.dialog},on:{"update:dialog":function(e){t.dialog=e}}})],1)},Ie=[],Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[[a("v-navigation-drawer",{attrs:{permanent:e.$vuetify.breakpoint.mdAndUp,"expand-on-hover":e.$vuetify.breakpoint.mdAndUp,dark:"",app:"",clipped:""},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[a("v-list",[a("v-list-item",{attrs:{link:""}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[e._v(e._s(e.isLoggedIn?e.userData.name:"Hello Student"))])],1)],1)],1),a("v-divider"),a("v-list",{attrs:{nav:"",dense:"",rounded:""}},[a("v-list-item-group",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[a("v-list-item",{attrs:{to:{name:"Announcements"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-bullhorn")])],1),a("v-list-item-title",[e._v("Announcements")])],1),a("v-list-item",{attrs:{to:{name:"Quizzes"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-head-question")])],1),a("v-list-item-title",[e._v("Quizzes")])],1),a("v-list-item",{attrs:{to:{name:"Assignments"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-comment-question")])],1),a("v-list-item-title",[e._v("Assignments")])],1),a("v-list-item",{attrs:{to:{name:"Grades"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-account-star")])],1),a("v-list-item-title",[e._v("Grades")])],1),e.userData.admin?a("v-list-item",{attrs:{to:{name:"Students"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-account-group")])],1),a("v-list-item-title",[e._v("Students")])],1):e._e(),e.userData.admin?a("v-list-item",{attrs:{to:{name:"Access"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-calendar-check")])],1),a("v-list-item-title",[e._v("Access")])],1):e._e(),a("v-list-item",{attrs:{to:{name:"Videos"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-video")])],1),a("v-list-item-title",[e._v("Lessons")])],1),e.isLoggedIn?a("v-list-item",{attrs:{to:{name:"Classes"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-teach")])],1),a("v-list-item-title",[e._v("Classes")])],1):e._e(),e.isLoggedIn?a("v-list-item",{attrs:{to:{name:"ResetPassword"}}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-lock")])],1),a("v-list-item-title",[e._v("Change Password")])],1):e._e(),e.isLoggedIn?a("v-list-item",{on:{click:e.logout}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-logout")])],1),a("v-list-item-title",[e._v("Logout")])],1):e._e()],1)],1)],1)]],2)},je=[],Oe={name:"Drawer",props:["staticOpen"],data:function(){return{open:this.staticOpen||!1,selected:1}},computed:Object(o["a"])({},Object(c["b"])(["userData","isLoggedIn"])),methods:{logout:function(){this.$store.dispatch("setUserData",{admin:!1,name:"",token:""}),this.$store.dispatch("setIsLoggedIn",!1),this.$store.dispatch("setUserClasses",[]),this.$store.dispatch("setUserClass",0),this.$router.push({name:"Announcements"})}},watch:{staticOpen:function(e){this.open=e},open:function(e){this.$emit("closedDrawer",{value:e})}}},Ee=Oe,Qe=a("8860"),Me=a("da13"),$e=a("5d23"),Ne=a("1baa"),Be=a("34c3"),Le=a("f774"),Ue=Object(m["a"])(Ee,Ae,je,!1,null,null,null),Fe=Ue.exports;p()(Ue,{VDivider:R["a"],VIcon:Y["a"],VList:Qe["a"],VListItem:Me["a"],VListItemContent:$e["a"],VListItemGroup:Ne["a"],VListItemIcon:Be["a"],VListItemTitle:$e["c"],VNavigationDrawer:Le["a"]});var Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(){return e.$emit("update:dialog",!1)}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v("Payments")]),a("v-spacer"),a("v-toolbar-items",[e.userData.admin?a("v-btn",{attrs:{dark:"",text:""},on:{click:e.updatePayments}},[e._v("Save")]):e._e()],1)],1),a("v-card-title",[e._v(" "+e._s(e.studentName)+" "),a("v-spacer"),a("v-col",{attrs:{cols:"6",sm:"3"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Month",readonly:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-text-field",n,!1),s))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{type:"month","no-title":"",scrollable:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.saveMonth}},[e._v("OK")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.weeks,"disable-sort":""},scopedSlots:e._u([{key:"item.status",fn:function(t){var s=t.item;return[a("v-simple-checkbox",{attrs:{ripple:!1,disabled:!e.userData.admin},model:{value:s.status,callback:function(t){e.$set(s,"status",t)},expression:"item.status"}})]}}])})],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.loadingDialog,callback:function(t){e.loadingDialog=t},expression:"loadingDialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Please wait... "),a("v-progress-linear",{attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},Ye=[],Ge=(a("4160"),a("3ca3"),a("159b"),a("c1df")),He=a.n(Ge);function We(e){var t=new Date(e);return t.setDate(t.getDate()+(12-t.getDay())%7),t}function Ze(e){var t=We(e),a=t.getMonth(),s=[];while(t.getMonth()===a){var n=He()(t).toISOString().substr(0,10);t.setDate(t.getDate()+7);var i=t.toISOString().substr(0,10);s.push({from:n,to:i,status:!1,ID:-1,textValue:"From: "+n+" => To: "+i})}return s}var Ke={name:"Payment",props:["dialog","studentName","userID"],data:function(){return{headers:[{text:"From",value:"from"},{text:"To",value:"to"},{text:"Status",value:"status"}],weeks:[],date:(new Date).toISOString().substr(0,7),menu:!1,loadingDialog:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["userData","classes"])),{},{selectedClass:function(){return this.classes.values[this.classes.selectedClass].classHash}}),methods:{saveMonth:function(){this.$refs.menu.save(this.date),this.initializeWeeks()},initializeWeeks:function(){var e=this;this.weeks=Ze(this.date),this.getPayments().then((function(t){t.forEach((function(t){e.weeks.forEach((function(a,s){new Date(a.from).setHours(0,0,0,0)===new Date(t.startDate).setHours(0,0,0,0)&&(e.weeks[s].status=!0,e.weeks[s].ID=t.ID)}))}))}))},getPayments:function(){var e=new Date(this.weeks[0].from).getTime(),t=new Date(this.weeks[this.weeks.length-1].to).getTime();return Q({method:"GET",url:"/payments/month",params:{userID:this.userID,startDate:e,endDate:t}}).then((function(e){return e.data.payments}))},updatePayments:function(){var e=this;this.loadingDialog=!0;var t=[];this.weeks.forEach((function(a){t.push(e.pushPayment(a))})),Promise.all(t).then((function(){e.$emit("update:dialog",!1),e.$store.dispatch("viewSuccessSnackbar","Payments updates successfully")})).catch((function(){e.$store.dispatch("viewErrorSnackbar","An error occurred while trying to update the payments")})).finally((function(){e.loadingDialog=!1}))},pushPayment:function(e){var t="";if(-1===e.ID&&e.status?t="POST":-1===e.ID||e.status||(t="DELETE"),""!==t){var a=new FormData;return a.append("id",e.ID),a.append("userID",this.userID),a.append("startDate",new Date(e.from).getTime()),a.append("endDate",new Date(e.to).getTime()),a.append("selectedClass",this.selectedClass),Q({method:t,url:"/admin/payments",data:a})}}},watch:{dialog:function(e){e&&this.initializeWeeks()}}},Je=Ke,Xe=a("8fea"),et=a("2e4b"),tt=a("e449"),at=a("8e36"),st=a("9e88"),nt=a("71d9"),it=a("2a7f"),ot=Object(m["a"])(Je,Re,Ye,!1,null,"4a880d0c",null),rt=ot.exports;p()(ot,{VBtn:h["a"],VCard:L["a"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VDataTable:Xe["a"],VDatePicker:et["a"],VDialog:F["a"],VIcon:Y["a"],VMenu:tt["a"],VProgressLinear:at["a"],VRow:pe["a"],VSimpleCheckbox:st["a"],VSpacer:G["a"],VTextField:H["a"],VToolbar:nt["a"],VToolbarItems:it["a"],VToolbarTitle:it["b"]});var lt=function(){var e=this,t=this,a=t.$createElement,s=t._self._c||a;return s("v-navigation-drawer",{attrs:{right:"",temporary:"",app:"",clipped:""},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[t.showLogin?s("Login",{on:{showRegister:function(){return e.showLogin=!1}}}):s("Register",{on:{backToLogin:function(){return e.showLogin=!0}}})],1)},ct=[],dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Login")]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{icon:"",large:""},on:{click:e.showRegister}},s),[a("v-icon",[e._v("mdi-account-plus-outline")])],1)]}}])},[a("span",[e._v("Register")])])],1),a("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.invalid;return[a("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("v-card-text",[a("TextField",{attrs:{value:e.user.username,label:"Username",rules:"required"},on:{"update:value":function(t){return e.$set(e.user,"username",t)}}}),a("Password",{attrs:{password:e.user.password,"hide-lock-icon":!0},on:{"update:password":function(t){return e.$set(e.user,"password",t)}}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",type:"submit",disabled:s,loading:e.loading}},[e._v("Login")])],1)],1)]}}])})],1)],1)],1)},ut=[],mt=(a("96cf"),a("1da1")),vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{label:e.label||"Password","prepend-icon":e.hideLockIcon?"":"mdi-lock","append-icon":e.hiddenPassword?"mdi-eye":"mdi-eye-off",type:e.hiddenPassword?"password":"text","error-messages":s},on:{"click:append":function(t){e.hiddenPassword=!e.hiddenPassword},input:function(t){return e.$emit("update:password",t)}},model:{value:e.updatedPassword,callback:function(t){e.updatedPassword=t},expression:"updatedPassword"}})]}}])})},pt=[],ht={name:"Password",props:["password","label","hideLockIcon"],data:function(){return{updatedPassword:this.password||"",hiddenPassword:!0}}},ft=ht,gt=Object(m["a"])(ft,vt,pt,!1,null,"1acd77aa",null),bt=gt.exports;p()(gt,{VTextField:H["a"]});var _t={name:"Login",components:{Password:bt,TextField:se},data:function(){return{loading:!1,user:{username:"",password:""}}},methods:{login:function(){var e=this;return Object(mt["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,a=new FormData,a.append("username",e.user.username),a.append("password",e.user.password),Q({method:"POST",url:"/login",data:a}).then((function(t){e.$store.dispatch("setUserData",{name:t.data.name,token:t.data.token}),e.$store.dispatch("setIsLoggedIn",!0),e.$router.push({name:"Classes"})})).finally((function(){e.loading=!1}));case 5:case"end":return t.stop()}}),t)})))()},showRegister:function(){this.$emit("showRegister")}}},wt=_t,Dt=Object(m["a"])(wt,dt,ut,!1,null,null,null),yt=Dt.exports;p()(Dt,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardText:U["c"],VCol:ve["a"],VIcon:Y["a"],VRow:pe["a"],VSpacer:G["a"],VToolbar:nt["a"],VToolbarTitle:it["b"],VTooltip:W["a"]});var xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Register")]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{icon:"",large:""},on:{click:e.backToLogin}},s),[a("v-icon",[e._v("mdi-login")])],1)]}}])},[a("span",[e._v("Login")])])],1),a("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.invalid;return[a("form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[a("v-card-text",[a("TextField",{attrs:{value:e.user.fullName,label:"Full Name",rules:"required"},on:{"update:value":function(t){return e.$set(e.user,"fullName",t)}}}),a("ValidationProvider",{attrs:{rules:"required|username"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{label:"Username",type:"text","error-messages":s},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})]}}],null,!0)}),a("Password",{attrs:{password:e.user.password,"hide-lock-icon":!0},on:{"update:password":function(t){return e.$set(e.user,"password",t)}}}),a("Password",{attrs:{password:e.user.confirmPassword,"hide-lock-icon":!0},on:{"update:password":function(t){return e.$set(e.user,"confirmPassword",t)}}}),a("TextField",{attrs:{value:e.user.phoneNumber,label:"Your Number",rules:"required|max:11|min:11"},on:{"update:value":function(t){return e.$set(e.user,"phoneNumber",t)}}}),a("TextField",{attrs:{value:e.user.parentNumber,label:"Parent Number",rules:"required|max:11|min:11"},on:{"update:value":function(t){return e.$set(e.user,"parentNumber",t)}}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",type:"submit",disabled:s,loading:e.loading}},[e._v("Register")])],1)],1)]}}])})],1)],1)],1)},kt=[],Vt={name:"Register",components:{Password:bt,TextField:se},data:function(){return{loading:!1,user:{fullName:"",username:"",password:"",confirmPassword:"",phoneNumber:"",parentNumber:""}}},methods:{register:function(){var e=this;return Object(mt["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$refs.observer.validate();case 3:a=t.sent,a&&(s=new FormData,s.append("fullName",e.user.fullName),s.append("username",e.user.username),s.append("password",e.user.password),s.append("confirmPassword",e.user.confirmPassword),s.append("phoneNumber",e.user.phoneNumber),s.append("parentNumber",e.user.parentNumber),Q({method:"POST",url:"/register",data:s}).then((function(){e.backToLogin()})).finally((function(){e.loading=!1})));case 5:case"end":return t.stop()}}),t)})))()},backToLogin:function(){this.$emit("backToLogin")}}},Ct=Vt,Tt=Object(m["a"])(Ct,xt,kt,!1,null,null,null),St=Tt.exports;p()(Tt,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardText:U["c"],VCol:ve["a"],VIcon:Y["a"],VRow:pe["a"],VSpacer:G["a"],VTextField:H["a"],VToolbar:nt["a"],VToolbarTitle:it["b"],VTooltip:W["a"]});var zt={name:"LoginDrawer",props:["staticOpen"],components:{Register:St,Login:yt},data:function(){return{open:this.staticOpen||!1,showLogin:!0}},watch:{staticOpen:function(e){e&&(this.showLogin=!0),this.open=e},open:function(e){this.$emit("closedDrawer",{value:e})}}},qt=zt,Pt=Object(m["a"])(qt,lt,ct,!1,null,"c4652d1a",null),It=Pt.exports;p()(Pt,{VNavigationDrawer:Le["a"]});var At={name:"AppBar",props:["pageName"],components:{LoginDrawer:It,Drawer:Fe,Payment:rt},computed:Object(o["a"])({},Object(c["b"])(["userData","classes","isLoggedIn"])),data:function(){return{drawer:!1,dialog:!1,loginDrawer:!1}},methods:{changeSelectedClass:function(e){this.$store.dispatch("setUserClass",e)}}},jt=At,Ot=a("40dc"),Et=a("5bc1"),Qt=a("8212"),Mt=a("adda"),$t=Object(m["a"])(jt,Pe,Ie,!1,null,"349e398e",null),Nt=$t.exports;p()($t,{VAppBar:Ot["a"],VAppBarNavIcon:Et["a"],VAvatar:Qt["a"],VBtn:h["a"],VIcon:Y["a"],VImg:Mt["a"],VList:Qe["a"],VListItem:Me["a"],VListItemTitle:$e["c"],VMenu:tt["a"],VSpacer:G["a"],VToolbarTitle:it["b"],VTooltip:W["a"]});var Bt=a("e044"),Lt={name:"Announcements",components:{AppBar:Nt,Announcement:fe,BottomPagination:xe,Search:qe},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["userData","classes","isLoggedIn"])),{},{selectedClass:function(){return this.isLoggedIn?this.classes.values[this.classes.selectedClass].classHash:""}}),watch:{options:{handler:function(){this.getAnnouncements()},deep:!0},selectedClass:function(){this.options={sortBy:["created_at"],sortDesc:["true"],page:1,itemsPerPage:5},this.getAnnouncements()}},data:function(){return{fab:!1,sheet:!1,announcements:[],placeholderExists:!1,totalPages:1,searchValues:{title:"",topic:"",content:""},options:{sortBy:["created_at"],sortDesc:["true"],page:1,itemsPerPage:5}}},methods:{getAnnouncements:function(){var e=this;this.isLoggedIn?Q({method:"GET",url:"/announcements",params:{itemsPerPage:this.options.itemsPerPage,page:this.options.page,sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,title:this.searchValues.title,topic:this.searchValues.topic,content:this.searchValues.content}}).then((function(t){e.announcements=t.data.announcements;var a=t.data.total;e.totalPages=Math.ceil(a/e.options.itemsPerPage)})):this.announcements=Bt},createPlaceholder:function(){this.placeholderExists?this.$store.dispatch("viewErrorSnackbar","Please fill the unfinished one first"):(this.placeholderExists=!0,this.announcements.unshift({isNew:!0,ID:0}),this.$vuetify.goTo(0))},deleteAnnouncement:function(e){var t=this.announcements.indexOf(e);0===t&&(this.placeholderExists=!1),this.announcements.splice(t,1)},updateAnnouncements:function(e){var t=e.old,a=e.updated,s=this.announcements.indexOf(t);a.classHash===this.selectedClass?this.announcements[s]=a:this.announcements.splice(s,1)},filterAnnouncements:function(e){this.announcements=[],this.searchValues=Object.assign({},e.searchValues),this.getAnnouncements()}},mounted:function(){this.getAnnouncements()}},Ut=Lt,Ft=a("288c"),Rt=a("a523"),Yt=a("f6c4"),Gt=a("c73b"),Ht=Object(m["a"])(Ut,T,S,!1,null,null,null),Wt=Ht.exports;p()(Ht,{VApp:D["a"],VBottomSheet:Ft["a"],VBtn:h["a"],VContainer:Rt["a"],VIcon:Y["a"],VMain:Yt["a"],VSpeedDial:Gt["a"]});var Zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Students"}}),a("v-main",[a("v-container",[a("v-tabs",{attrs:{"background-color":"primary",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("Pending Students")]),a("v-tab",[e._v("Active Students")])],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("StudentsTable",{attrs:{pending:!0}})],1),a("v-tab-item",[a("StudentsTable",{attrs:{pending:!1}})],1)],1)],1)],1)],1)},Kt=[],Jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v(" "+e._s(e.tableTitle)+" "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search by Username, Full Name, or Phone Number","single-line":"",clearable:""},on:{input:e.search},model:{value:e.searchBy,callback:function(t){e.searchBy=t},expression:"searchBy"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.students,options:e.options,"server-items-length":e.totalStudents,loading:e.loading,"footer-props":{"items-per-page-options":[10,15,20],"show-current-page":!0,"show-first-last-page":!0},"items-per-page":10},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([e.pending?{key:"footer",fn:function(){return[a("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.sendState}},[e._v("Submit")])]},proxy:!0}:null,{key:"item.CreatedAt",fn:function(t){var a=t.item;return[e._v(e._s(a.CreatedAt.substring(0,10)))]}},e.pending?{key:"item.status",fn:function(t){var s=t.item;return[a("v-row",[a("v-radio-group",{attrs:{row:""},on:{change:function(e){"false"===s.status&&(s.admin=!1)}},model:{value:s.status,callback:function(t){e.$set(s,"status",t)},expression:"item.status"}},[a("v-radio",{attrs:{label:"Accept",value:"true"}}),a("v-radio",{attrs:{label:"Decline",value:"false"}})],1)],1)]}}:null,{key:"item.pendingAdmin",fn:function(t){var s=t.item;return[a("v-simple-checkbox",{attrs:{ripple:!1,disabled:!s.status||"false"===s.status},model:{value:s.admin,callback:function(t){e.$set(s,"admin",t)},expression:"item.admin"}})]}},{key:"item.payments",fn:function(t){var s=t.item;return[s.admin?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({staticClass:"btn-admin-payment",attrs:{small:"",fab:"",text:""}},s),[a("v-icon",[e._v("mdi-cancel")])],1)]}}],null,!0)},[a("span",[e._v("There's no payments for admin users")])]):a("v-btn",{attrs:{small:"",fab:"",text:""},on:{click:function(t){return e.viewPayments(s)}}},[a("v-icon",[e._v("mdi-cash")])],1)]}},{key:"item.admin",fn:function(t){var s=t.item;return[a("v-row",[a("v-simple-checkbox",{attrs:{ripple:!1,disabled:""},model:{value:s.admin,callback:function(t){e.$set(s,"admin",t)},expression:"item.admin"}}),a("ConfirmationDialog",{attrs:{buttonText:"Change Status",mainText:s.admin?"Convert this ADMIN to STUDENT ?":"Are you sure you want to convert this user to an admin ?",message:s.admin?"This user won't be able to create announcement, quiz, video, etc...":"This user will have admin privileges to create, edit, and delete components for this class","admin-status":""},on:{confirm:function(t){return e.changeAdminStatus(s)}}})],1)]}}],null,!0)}),e.pending?e._e():a("Payment",{attrs:{dialog:e.payment.dialog,"student-name":e.payment.studentName,userID:e.payment.userID},on:{"update:dialog":function(t){return e.$set(e.payment,"dialog",t)}}})],1)},Xt=[],ea=(a("5319"),a("1276"),{name:"StudentsTable",components:{ConfirmationDialog:K,Payment:rt},props:["pending"],computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["classes"])),{},{selectedClass:function(){return this.classes.values[this.classes.selectedClass].classHash}}),data:function(){return{totalStudents:0,students:[],loading:!1,options:{},tableTitle:"Active Students",headers:[{text:"Full Name",value:"user.fullName"},{text:"Username",value:"user.username"},{text:"Phone Number",value:"user.phoneNumber",sortable:!1},{text:"Parent Number",value:"user.parentNumber",sortable:!1},{text:"Registered At",value:"CreatedAt"}],searchByItems:[{text:"Username",value:"username"},{text:"Full Name",value:"fullName"}],searchBy:"",years:[{text:"First Year",value:1},{text:"Second Year",value:2},{text:"Third Year",value:3}],payment:{dialog:!1,studentName:"",userID:0},date:(new Date).toISOString().substr(0,7),menu:!1,weeks:[],selectedWeek:{}}},mounted:function(){this.getStudents(),this.pending?(this.headers.push({text:"State",value:"status",sortable:!1}),this.headers.push({text:"Admin",value:"pendingAdmin",sortable:!1}),this.tableTitle="Pending Students"):(this.headers.push({text:"Payments",value:"payments",sortable:!1}),this.headers.push({text:"Admin",value:"admin"}),this.weeks=Ze(this.date))},watch:{options:{handler:function(){this.getStudents()},deep:!0},selectedClass:function(){this.options.page=1,this.getStudents()}},methods:{getStudents:function(){var e=this;this.students=[],this.loading=!0;for(var t=this.options,a=t.sortBy,s=t.sortDesc,n=t.page,i=t.itemsPerPage,o=[],r=0;r<a.length;r++)if("CreatedAt"===a[r])o.push("created_at");else if("admin"===a[r])o.push("admin");else{var l=a[r].split(".")[1];o.push(l.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())})))}Q({method:"GET",url:"/admin/classes/students",params:{page:n,itemsPerPage:i,sortBy:o,sortDesc:s,pending:this.pending,searchByValue:this.searchBy}}).then((function(t){e.students=t.data.students,e.totalStudents=t.data.totalStudents})).finally((function(){e.loading=!1}))},search:function(){this.options.page=1,this.getStudents()},sendState:function(){var e=this,t=[];this.loading=!0;for(var a=0;a<this.students.length;a++)void 0!==this.students[a].status&&t.push(this.updateClassUser(this.students[a]));Promise.all(t).then((function(){e.getStudents()})).finally((function(){e.loading=!1}))},updateClassUser:function(e){var t=new FormData;return t.append("classUserID",e.ID),this.pending?t.append("status",e.status):t.append("status",!0),t.append("admin",e.admin),Q({method:"PUT",url:"/admin/classes/students",data:t})},changeAdminStatus:function(e){e.admin=!e.admin,this.updateClassUser(e)},viewPayments:function(e){this.pending||(e.admin?this.$store.dispatch("viewErrorSnackbar","This user is an admin, you can't view admin payments"):(this.payment.dialog=!0,this.payment.studentName=e.user.fullName,this.payment.userID=e.user.ID))},saveMonth:function(){this.$refs.menu.save(this.date),this.weeks=Ze(this.date)}}}),ta=ea,aa=(a("2845"),a("67b6")),sa=a("43a6"),na=Object(m["a"])(ta,Jt,Xt,!1,null,"768adebc",null),ia=na.exports;p()(na,{VBtn:h["a"],VCard:L["a"],VCardTitle:U["d"],VDataTable:Xe["a"],VIcon:Y["a"],VRadio:aa["a"],VRadioGroup:sa["a"],VRow:pe["a"],VSimpleCheckbox:st["a"],VSpacer:G["a"],VTextField:H["a"],VTooltip:W["a"]});var oa={name:"PendingStudents",components:{AppBar:Nt,StudentsTable:ia},data:function(){return{tab:0}}},ra=oa,la=a("71a3"),ca=a("c671"),da=a("fe57"),ua=a("aac8"),ma=Object(m["a"])(ra,Zt,Kt,!1,null,null,null),va=ma.exports;p()(ma,{VApp:D["a"],VContainer:Rt["a"],VMain:Yt["a"],VTab:la["a"],VTabItem:ca["a"],VTabs:da["a"],VTabsItems:ua["a"]});var pa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Quizzes"}}),a("v-main",[a("v-container",[a("v-tabs",{attrs:{"background-color":"primary",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("Current Quizzes")]),a("v-tab",[e._v("Upcoming Quizzes")]),a("v-tab",[e._v("Past Quizzes")])],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("QuizzesTable",{attrs:{title:"Current Quizzes",type:0,"refresh-quizzes":e.refreshQuizzes},on:{refreshCompleted:function(t){e.refreshQuizzes=!1}}})],1),a("v-tab-item",[a("QuizzesTable",{attrs:{title:"Upcoming Quizzes",type:1,"refresh-quizzes":e.refreshQuizzes},on:{refreshCompleted:function(t){e.refreshQuizzes=!1}}})],1),a("v-tab-item",[a("QuizzesTable",{attrs:{title:"Past Quizzes",type:-1,"refresh-quizzes":e.refreshQuizzes},on:{refreshCompleted:function(t){e.refreshQuizzes=!1}}})],1)],1)],1)],1)],1)},ha=[],fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.quizzes,loading:e.loading,"disable-sort":"","sort-by":"start_time","sort-desc":"",options:e.options,"server-items-length":e.totalQuizzes,"footer-props":{"items-per-page-options":[10,15,20],"show-current-page":!0,"show-first-last-page":!0},"items-per-page":10},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v(" "+e._s(e.title)+" ")]),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[e.userData.admin?a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),s),[e._v("Create Quiz ")]):e._e()]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("Quiz",{attrs:{"edited-index":e.editedIndex,"static-quiz":e.editedQuiz},on:{closeDialog:e.close,save:e.save}})],1)],1)]},proxy:!0},{key:"item.startTime",fn:function(t){var a=t.item;return[e._v(" "+e._s(e._f("momentFormatDate")(a.startTime))+" ")]}},{key:"item.endTime",fn:function(t){var a=t.item;return[e._v(" "+e._s(e._f("momentFormatDate")(a.endTime))+" ")]}},{key:"item.remainingTime",fn:function(t){var s=t.item;return[s.started?a("span",[a("Timer",{attrs:{"end-time":s.remainingTime,simple:!0}})],1):a("span",[e._v("Start Now!")])]}},{key:"item.goTo",fn:function(t){var s=t.item;return[a("v-btn",{attrs:{small:"",to:{name:"QuizQuestions",params:{quizHash:s.hash}}}},[e._v("GO TO")])]}},{key:"item.start",fn:function(t){var s=t.item;return[s.timeAvailable&&s.access?a("v-icon",{attrs:{color:"green"},on:{click:function(t){return e.confirmQuizStart(s)}}},[e._v("mdi-clock-start")]):s.timeAvailable?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"red",dark:""}},"v-icon",n,!1),s),[e._v("mdi-close-circle")])]}}],null,!0)},[a("span",[e._v("You don't have access to take this quiz. If you think there's an error, please contact the administrator")])]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"red"}},"v-icon",n,!1),s),[e._v("mdi-timer-off")])]}}],null,!0)},[a("span",[e._v("You've consumed your available time. The grade will be revealed after the end time for the quiz")])])]}},{key:"item.review",fn:function(t){var s=t.item;return[s.access?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"green"},on:{click:function(t){return e.review(s)}}},"v-icon",i,!1),n),[e._v("mdi-star-check")])]}}],null,!0)},[a("span",[e._v("Review quiz model answer")])]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"red",dark:""}},"v-icon",n,!1),s),[e._v("mdi-close-circle")])]}}],null,!0)},[a("span",[e._v("You don't have access to review this quiz. If you think there's an error, please contact the administrator")])])]}},{key:"item.access",fn:function(t){var s=t.item;return[s.access?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"green",dark:""}},"v-icon",n,!1),s),[e._v("mdi-check-bold")])]}}],null,!0)},[a("span",[e._v("You could take this quiz when it starts")])]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"red",dark:""}},"v-icon",n,!1),s),[e._v("mdi-close-circle")])]}}],null,!0)},[a("span",[e._v("You don't have access to take this quiz. If you think there's an error, please contact the administrator")])])]}},{key:"item.studentTime",fn:function(t){var s=t.item;return[s.studentTime/60>=1?a("span",[e._v(e._s(Math.floor(s.studentTime/60))+"H")]):e._e(),s.studentTime/60>=1&&s.studentTime%60>=1?a("span",[e._v(": ")]):e._e(),s.studentTime%60>=1?a("span",[e._v(e._s(s.studentTime%60)+"M")]):e._e()]}},e.userData.admin?{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editQuiz(s)}}},[e._v(" mdi-pencil ")]),a("ConfirmationDialog",{attrs:{datatable:!0,mainText:"Delete Quiz",message:"You won't be able to restore the deleted quiz or its questions"},on:{confirm:function(t){return e.deleteQuiz(s)}},scopedSlots:e._u([{key:"item.actions",fn:function(e){e.item}}],null,!0)})]}}:null],null,!0)}),e.dialogStartQuiz?a("v-dialog",{attrs:{width:"500"},model:{value:e.dialogStartQuiz,callback:function(t){e.dialogStartQuiz=t},expression:"dialogStartQuiz"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v(" Start Quiz Now ? ")]),a("v-card-subtitle",[e._v("Title: "+e._s(e.newQuizToStart.title))]),a("v-card-text",[e._v(" Are you sure you want to start the quiz ? "),a("br"),e._v(" You'll have "+e._s(e.newQuizToStart.studentTime)+" minutes to submit your answers "),a("br"),e._v(" The timer will start immediately after you click the button below "),a("br")]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(t){e.dialogStartQuiz=!1}}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.solve(e.newQuizToStart)}}},[e._v(" Yes Start it Now! "),a("v-icon",[e._v("mdi-clock-start")])],1)],1)],1)],1):e._e()],1)},ga=[],ba=(a("d81d"),a("820e"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("ValidationObserver",{ref:"observer"},[a("form",[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{label:"Title","prepend-icon":"mdi-format-title",type:"text","error-messages":s},model:{value:e.quiz.title,callback:function(t){e.$set(e.quiz,"title",t)},expression:"quiz.title"}})]}}])}),a("v-icon",[e._v("mdi-calendar")]),a("span",[e._v("Start Date")]),a("Datetime",{attrs:{type:"datetime","use12-hour":"","input-class":"rounded-0 grey lighten-3","min-datetime":(new Date).toISOString()},model:{value:e.quiz.startTime,callback:function(t){e.$set(e.quiz,"startTime",t)},expression:"quiz.startTime"}}),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.quiz.startTime,expression:"quiz.startTime"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],domProps:{value:e.quiz.startTime},on:{input:function(t){t.target.composing||e.$set(e.quiz,"startTime",t.target.value)}}}),a("div",{staticClass:"red--text"},[e._v(e._s(s[0]))])]}}])}),a("v-icon",[e._v("mdi-calendar")]),a("span",[e._v("End Date")]),a("Datetime",{attrs:{type:"datetime","use12-hour":"","min-datetime":e.quiz.startTime||(new Date).toISOString(),"input-class":"rounded-0 grey lighten-3"},model:{value:e.quiz.endTime,callback:function(t){e.$set(e.quiz,"endTime",t)},expression:"quiz.endTime"}}),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.quiz.endTime,expression:"quiz.endTime"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],domProps:{value:e.quiz.endTime},on:{input:function(t){t.target.composing||e.$set(e.quiz,"endTime",t.target.value)}}}),a("div",{staticClass:"red--text"},[e._v(e._s(s[0]))])]}}])}),0!==e.maxStudentDuration?a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("span",{staticClass:"subheading"},[e._v("Student Duration")])]),a("v-slider",{staticClass:"align-center",attrs:{max:e.maxStudentDuration,min:0},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-text-field",{staticClass:"mt-0 pt-0 mr-1",staticStyle:{width:"45px"},attrs:{label:"Hours",type:"number"},model:{value:e.hours,callback:function(t){e.hours=t},expression:"hours"}}),a("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"45px"},attrs:{label:"Minutes",type:"number"},model:{value:e.minutes,callback:function(t){e.minutes=t},expression:"minutes"}})]},proxy:!0}],null,!1,987421364),model:{value:e.quiz.studentTime,callback:function(t){e.$set(e.quiz,"studentTime",t)},expression:"quiz.studentTime"}})],1):e._e()],1)])],1),e.userData.admin?a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.saveQuiz}},[e._v("Save")])],1):e._e()],1)}),_a=[],wa={name:"Quiz",props:["editedIndex","staticQuiz"],data:function(){return{loading:!1,quiz:this.staticQuiz||{title:"",startTime:"",endTime:"",studentTime:30}}},computed:Object(o["a"])({formTitle:function(){return-1===this.editedIndex?"New Quiz":"Edit Quiz"},method:function(){return-1===this.editedIndex?"POST":"PUT"},selectedClass:function(){return this.classes.values[this.classes.selectedClass].classHash},hours:{get:function(){return Math.floor(this.quiz.studentTime/60)},set:function(e){this.quiz.studentTime=""===e?this.minutes:60*Math.min(this.maxStudentDurationInHours,parseInt(e))+this.minutes}},minutes:{get:function(){return this.quiz.studentTime%60},set:function(e){this.quiz.studentTime=""===e?60*this.hours:60*this.hours+Math.min(59,parseInt(e))}},maxStudentDuration:function(){if(""===this.quiz.startTime||""===this.quiz.endTime)return 0;var e=He()(new Date(this.quiz.startTime)),t=He()(new Date(this.quiz.endTime));return t.diff(e,"minutes")},maxStudentDurationInHours:function(){return Math.floor(this.maxStudentDuration/60)}},Object(c["b"])(["userData","classes"])),methods:{saveQuiz:function(){var e=this;return Object(mt["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.observer.validate();case 2:a=t.sent,a&&(e.loading=!0,s=new FormData,s.append("id",e.quiz.ID),s.append("title",e.quiz.title),s.append("selectedClass",e.selectedClass),s.append("startTime",Date.parse(e.quiz.startTime)),s.append("endTime",Date.parse(e.quiz.endTime)),s.append("studentTime",e.quiz.studentTime),Q({method:e.method,url:"/admin/quizzes",data:s}).then((function(t){e.$emit("save",{quiz:t.data.quiz})})).finally((function(){e.loading=!1})));case 4:case"end":return t.stop()}}),t)})))()},close:function(){this.$emit("closeDialog")}},watch:{staticQuiz:function(e){this.quiz=e},"quiz.startTime":function(e){var t=He()(new Date(this.quiz.endTime)),a=He()(new Date(e));t.isBefore(a)&&(this.quiz.endTime=a.add(1,"days").toDate().toISOString())}}},Da=wa,ya=a("ba0d"),xa=Object(m["a"])(Da,ba,_a,!1,null,null,null),ka=xa.exports;p()(xa,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VIcon:Y["a"],VRow:pe["a"],VSlider:ya["a"],VSpacer:G["a"],VTextField:H["a"]});var Va=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-countdown-timer",{attrs:{"start-time":new Date,"end-time":e.endTime,interval:1e3,"start-label":"Until start:","end-label":e.simple?"":"Remaining","label-position":"begin","end-text":"Time's Up","day-txt":"days","hour-txt":"hours","minutes-txt":"minutes","seconds-txt":"seconds"},on:{start_callback:function(t){return e.startCallBack("event started")},end_callback:e.endCallBack},scopedSlots:e._u([{key:"start-label",fn:function(t){return[""!==t.props.startLabel&&t.props.tips&&"begin"===t.props.labelPosition?a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.props.startLabel)+":")]):e._e(),""===t.props.endLabel||t.props.tips||"begin"!==t.props.labelPosition?e._e():a("span",{staticStyle:{color:"blue"}},[e._v(e._s(t.props.endLabel)+":")])]}},{key:"countdown",fn:function(t){return[t.props.days>0?a("span",[e._v(e._s(t.props.days)+":")]):e._e(),a("span",[e._v(e._s(t.props.hours)+":")]),a("span",[e._v(e._s(t.props.minutes)+":")]),a("span",[e._v(e._s(t.props.seconds))])]}},{key:"end-label",fn:function(t){return[""!==t.props.startLabel&&t.props.tips&&"end"===t.props.labelPosition?a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.props.startLabel)+":")]):e._e(),""===t.props.endLabel||t.props.tips||"end"!==t.props.labelPosition?e._e():a("span",{staticStyle:{color:"blue"}},[e._v(e._s(t.props.endLabel)+":")])]}},{key:"end-text",fn:function(t){return[a("span",{staticStyle:{color:"green"}},[e._v(e._s(t.props.endText))])]}}])})},Ca=[],Ta={name:"Timer",props:["endTime","timeUp","simple"],methods:{startCallBack:function(){},endCallBack:function(){void 0!==this.endTime&&this.$emit("update:timeUp",!0)}}},Sa=Ta,za=Object(m["a"])(Sa,Va,Ca,!1,null,null,null),qa=za.exports,Pa=a("b9ad"),Ia={components:{Timer:qa,ConfirmationDialog:K,Quiz:ka},props:["title","type","refreshQuizzes"],data:function(){return{loading:!1,dialog:!1,dialogStartQuiz:!1,newQuizToStart:null,options:{},totalQuizzes:0,headers:[{text:"Title",value:"title"},{text:"Max Time",value:"studentTime"},{text:"Start At",value:"startTime"},{text:"End At",value:"endTime"}],quizzes:[],editedIndex:-1,editedQuiz:{text:"",startTime:"0",endTime:"0",studentTime:30}}},computed:Object(o["a"])(Object(o["a"])({url:function(){return-1===this.type?"/past":0===this.type?"/current":1===this.type?"/future":""}},Object(c["b"])(["userData","classes","isLoggedIn"])),{},{selectedClass:function(){return this.isLoggedIn?this.classes.values[this.classes.selectedClass].classHash:""}}),watch:{dialog:function(e){e||this.close()},options:{handler:function(){this.getQuizzes()},deep:!0},selectedClass:function(){this.options.page=1,this.getQuizzes()},refreshQuizzes:function(e){e&&this.getQuizzes()}},created:function(){this.emptyQuiz=Object.assign(this.editedQuiz,{}),this.userData.admin?(this.headers.push({text:"Actions",value:"actions"}),this.headers.splice(1,0,{text:"Go To",value:"goTo"})):1===this.type?this.headers.splice(1,0,{text:"Access",value:"access"}):0===this.type?(this.headers.splice(1,0,{text:"Start",value:"start"}),this.headers.splice(2,0,{text:"Remaining Time",value:"remainingTime"})):-1===this.type&&this.headers.splice(1,0,{text:"Review",value:"review"})},mounted:function(){this.getQuizzes()},methods:{getQuizzes:function(){var e=this;if(this.isLoggedIn){this.loading=!0;var t=this.options,a=t.sortBy,s=t.sortDesc,n=t.page,i=t.itemsPerPage;Q({method:"GET",url:"/quizzes"+this.url,params:{page:n,itemsPerPage:i,sortBy:a,sortDesc:s}}).then((function(t){e.totalQuizzes=t.data.totalQuizzes,-1===e.type?e.quizzes=t.data.pastQuizzes:0===e.type?e.quizzes=t.data.currentQuizzes:1===e.type&&(e.quizzes=t.data.futureQuizzes);var a=[],s=[];e.quizzes.forEach((function(t){a.push(e.getQuizPermission(t)),s.push(e.geStudentRemainingTime(t))}));var n=[Promise.all(a).then((function(t){e.quizzes.forEach((function(a,s){e.quizzes[s].access=t[s].data.status}))}))];return 0===e.type&&n.push(Promise.all(s).then((function(t){e.quizzes.forEach((function(a,s){t[s].data.recordFound?(e.quizzes[s].started=!0,e.quizzes[s].timeAvailable=new Date(t[s].data.studentTime).getTime()>=(new Date).getTime(),e.quizzes[s].remainingTime=t[s].data.studentTime):(e.quizzes[s].started=!1,e.quizzes[s].timeAvailable=!0)}))}))),Promise.allSettled(n)})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1,e.$emit("refreshCompleted")}))}else 0===this.type?(this.quizzes=Pa.current,this.totalQuizzes=this.quizzes.length,this.quizzes=this.quizzes.map((function(e){var t=new Date;return Object(o["a"])(Object(o["a"])({},e),{},{startTime:(new Date).setDate(t.getDate()-e.daysMargin),endTime:(new Date).setDate(t.getDate()+e.daysMargin),remainingTime:(new Date).setMinutes(t.getMinutes()+e.consumedMinutes)})}))):1===this.type?(this.quizzes=Pa.upcoming,this.totalQuizzes=this.quizzes.length,this.quizzes=this.quizzes.map((function(e){var t=new Date;return Object(o["a"])(Object(o["a"])({},e),{},{startTime:(new Date).setDate(t.getDate()+e.startDaysMargin),endTime:(new Date).setDate(t.getDate()+e.endDaysMargin)})}))):-1===this.type&&(this.quizzes=Pa.past,this.totalQuizzes=this.quizzes.length,this.quizzes=this.quizzes.map((function(e){var t=new Date;return Object(o["a"])(Object(o["a"])({},e),{},{startTime:(new Date).setDate(t.getDate()-e.startDaysMargin),endTime:(new Date).setDate(t.getDate()-e.endDaysMargin)})})))},getQuizPermission:function(e){return Q({method:"GET",url:"/payments/week",params:{eventDate:new Date(e.startTime).getTime()}})},geStudentRemainingTime:function(e){return Q({method:"GET",url:"/quizzes/grades/time",params:{quizID:e.ID}})},editQuiz:function(e){this.editedIndex=this.quizzes.indexOf(e),this.editedQuiz=Object.assign({},e),this.dialog=!0},deleteQuiz:function(e){var t=this.quizzes.indexOf(e),a=new FormData;a.append("id",e.ID),Q({method:"DELETE",url:"/admin/quizzes",data:a}).catch((function(e){console.log(e)})),this.quizzes.splice(t,1)},close:function(){this.dialog=!1,this.editedIndex=-1,this.editedQuiz=this.emptyQuiz},save:function(e){this.editedIndex>-1?Object.assign(this.quizzes[this.editedIndex],e.quiz):(this.quizzes.unshift(e.quiz),this.$router.push({name:"QuizQuestions",params:{quizHash:e.quiz.hash}})),this.close()},solve:function(e){this.$router.push({name:"SolveQuiz",params:{action:"solve",quizHash:e.hash}})},review:function(e){this.$router.push({name:"SolveQuiz",params:{action:"review",quizHash:e.hash}})},confirmQuizStart:function(e){e.started?this.solve(e):(this.newQuizToStart=e,this.dialogStartQuiz=!0)}},filters:{momentFormatDate:function(e){return He()(e).format("dddd Do MMM YYYY, h:mm a")}}},Aa=Ia,ja=Object(m["a"])(Aa,fa,ga,!1,null,null,null),Oa=ja.exports;p()(ja,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardText:U["c"],VCardTitle:U["d"],VDataTable:Xe["a"],VDialog:F["a"],VDivider:R["a"],VIcon:Y["a"],VSpacer:G["a"],VToolbar:nt["a"],VToolbarTitle:it["b"],VTooltip:W["a"]});var Ea={name:"Quizzes",components:{AppBar:Nt,QuizzesTable:Oa},data:function(){return{tab:0,refreshQuizzes:!1}},watch:{tab:function(){this.refreshQuizzes=!0}}},Qa=Ea,Ma=Object(m["a"])(Qa,pa,ha,!1,null,"741133d8",null),$a=Ma.exports;p()(Ma,{VApp:D["a"],VContainer:Rt["a"],VMain:Yt["a"],VTab:la["a"],VTabItem:ca["a"],VTabs:da["a"],VTabsItems:ua["a"]});var Na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Quiz"}}),a("v-main",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"9"}},[e.fetch.questions&&e.fetch.quiz&&e.questions.length>0?a("Question",{attrs:{question:e.questions[e.selectedQuestion],quiz:e.quiz,"is-new":e.newQuestion,"edit-mode":e.editMode},on:{"update:isNew":function(t){e.newQuestion=t},"update:is-new":function(t){e.newQuestion=t},"update:editMode":function(t){e.editMode=t},"update:edit-mode":function(t){e.editMode=t},updateQuestion:e.updateQuestion,deleteQuestion:e.deleteQuestion}}):e._e()],1),a("v-col",{attrs:{cols:"12",md:"3"}},[a("QuestionsNavigator",{attrs:{questions:e.questions,selectedQuestion:e.selectedQuestion,"edit-mode":e.editMode},on:{"update:selectedQuestion":function(t){e.selectedQuestion=t},"update:selected-question":function(t){e.selectedQuestion=t},createPlaceholder:e.createPlaceholder}})],1)],1)],1)],1)],1)},Ba=[],La=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",flat:"",dark:""}},[a("v-spacer"),a("span",[e._v("Marks")]),a("v-col",{attrs:{cols:"3",md:"2"}},[a("ValidationObserver",{ref:"markObserver"},[a("ValidationProvider",{attrs:{rules:"required|numeric|max:1"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[e.editMode?a("v-text-field",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.validateMark,expression:"validateMark"}],staticClass:"mt-10",attrs:{solo:"",rounded:"","error-messages":s},model:{value:e.questionData.question.totalMark,callback:function(t){e.$set(e.questionData.question,"totalMark",t)},expression:"questionData.question.totalMark"}}):[a("v-btn",{attrs:{icon:"",large:"",readonly:!0}},[e._v(" "+e._s(e.questionData.question.totalMark)+" ")])]]}}])})],1)],1)],1),a("v-card-text",[a("ValidationObserver",{ref:"observer"},[a("form",[e.editMode?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8"}},[a("ValidationProvider",{attrs:{vid:"question-text"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-textarea",{ref:"question-text",attrs:{label:"Question Text",type:"text","prepend-icon":"mdi-script-text",rows:"2","error-messages":s},model:{value:e.questionData.question.text,callback:function(t){e.$set(e.questionData.question,"text",t)},expression:"questionData.question.text"}})]}}],null,!1,1725007778)})],1),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("ValidationProvider",{attrs:{rules:"image",vid:"question-image"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-file-input",{attrs:{accept:"image/*","small-chips":"","show-size":"",label:"Question","prepend-icon":"mdi-file-question","error-messages":s},on:{change:e.previewImage},model:{value:e.questionData.question.image,callback:function(t){e.$set(e.questionData.question,"image",t)},expression:"questionData.question.image"}})]}}],null,!1,3001294291)})],1)],1):a("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.questionData.question.text)+" ")]),e.questionData.question.imageSrc.length>0?a("v-img",{attrs:{src:e.questionData.question.imageSrc}}):e._e(),a("v-radio-group",{attrs:{readonly:!e.editMode,disabled:!e.editMode,mandatory:""},model:{value:e.questionData.correctAnswer,callback:function(t){e.$set(e.questionData,"correctAnswer",t)},expression:"questionData.correctAnswer"}},e._l(e.questionData.choices,(function(t){return a("Choice",{key:t.ID,attrs:{staticText:t.text,value:t.ID,id:t.ID,editMode:e.editMode},on:{changeText:e.changeText,clearChoice:e.clearChoice}})})),1)],1)])],1),e.userData.admin?a("v-card-actions",[e.editMode?e._e():a("v-btn",{attrs:{color:"primary"},on:{click:e.changeEditMode}},[e._v("Edit")]),e.editMode?a("v-btn",{attrs:{color:"primary"},on:{click:e.addChoice}},[e._v("Add Choice")]):e._e(),e.editMode?a("v-btn",{attrs:{color:"success",loading:e.loading},on:{click:e.sendChoices}},[e._v("Save")]):e._e(),a("v-spacer"),this.newQuestion?e._e():a("ConfirmationDialog",{attrs:{buttonText:"Delete",mainText:"Delete This Item?",message:"You won't be able to restore the deleted question"},on:{confirm:e.deleteQuestion}})],1):e._e()],1)},Ua=[],Fa=(a("2b3d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ValidationObserver",{ref:"observer"},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-row",[a("v-col",[e.editMode?a("v-text-field",{attrs:{filled:"",label:"Answer","error-messages":s,"append-icon":"mdi-close"},on:{input:e.changeText,"click:append":e.clearChoice},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}):e._e()],1)],1)]}}])})],1),a("v-radio",{attrs:{label:e.text,value:e.value}})],1)}),Ra=[],Ya={name:"Choice",props:["staticText","value","id","editMode"],data:function(){return{text:this.staticText||""}},methods:{changeText:function(){this.$emit("changeText",{id:this.id,text:this.text})},clearChoice:function(){this.$emit("clearChoice",{id:this.id})}}},Ga=Ya,Ha=Object(m["a"])(Ga,Fa,Ra,!1,null,null,null),Wa=Ha.exports;p()(Ha,{VCol:ve["a"],VRadio:aa["a"],VRow:pe["a"],VTextField:H["a"]});var Za={name:"Question",components:{Choice:Wa,ConfirmationDialog:K},props:["question","isNew","quiz","editMode"],computed:Object(o["a"])({},Object(c["b"])(["userData"])),data:function(){return{loading:!1,choicesToBeDeleted:[],totalCreatedChoices:4,canCreateNew:!0,newQuestion:this.isNew,questionData:{question:{ID:this.question.question.ID||0,text:this.question.question.text||"",totalMark:this.question.question.totalMark||1,image:[],imagePath:this.question.question.imagePath||"",imageSrc:this.question.question.imageSrc||""},correctAnswer:this.question.correctAnswer||-1,choices:this.question.choices||[]}}},methods:{validateMark:function(){void 0!==this.$refs.markObserver&&this.$refs.markObserver.validate()},addChoice:function(){var e=this;return Object(mt["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.observer.validate();case 2:a=t.sent,a&&(e.canCreateNew&&e.questionData.choices.push({ID:e.totalCreatedChoices++,text:"",isNew:!0}),e.updateCanCreateNew());case 4:case"end":return t.stop()}}),t)})))()},changeText:function(e){var t=e.id;this.questionData.choices.forEach((function(a){a.ID===t&&(a.text=e.text)})),this.updateCanCreateNew()},clearChoice:function(e){var t=this,a=e.id;this.questionData.choices.forEach((function(e,s){e.ID===a&&(e.isNew||t.choicesToBeDeleted.push(a),t.questionData.choices.splice(s,1))})),this.updateCanCreateNew()},updateCanCreateNew:function(){var e=this;this.canCreateNew=!0,this.questionData.choices.forEach((function(t){""===t.text&&(e.canCreateNew=!1)}))},pushQuestion:function(){var e=new FormData;e.append("id",this.questionData.question.ID),e.append("text",this.questionData.question.text),e.append("totalMark",this.questionData.question.totalMark),e.append("quizID",this.quiz.ID),e.append("correctAnswer",this.questionData.correctAnswer),e.append("image",this.questionData.question.image);var t=this.newQuestion?"POST":"PUT";return Q({method:t,url:"/admin/quizzes/questions/mcq",data:e,config:{headers:{"Content-Type":"multipart/form-data"}}})},sendChoices:function(){var e=this;this.loading=!0,this.pushQuestion().then((function(t){e.questionData.question.ID=t.data.mcq.question.ID,e.questionData.question.imagePath=t.data.mcq.question.imagePath,e.newQuestion&&(e.questionData.question.image=[]);var a=[];return e.choicesToBeDeleted.forEach((function(t){a.push(e.deleteChoice(t))})),Promise.all(a)})).then((function(){var t=[];return e.questionData.choices.forEach((function(a,s){t.push(e.pushChoice(a,s))})),Promise.all(t)})).then((function(){return e.$emit("placeholderFilled",{questionData:e.questionData,new:e.newQuestion}),e.newQuestion=!1,e.pushQuestion()})).then((function(){e.loading=!1,e.$emit("updateQuestion",e.questionData),e.changeEditMode()}))},deleteChoice:function(e){var t=new FormData;return t.append("id",e),Q({method:"DELETE",url:"/admin/quizzes/choices",data:t})},pushChoice:function(e,t){var a=this,s=new FormData;s.append("id",e.ID),s.append("text",e.text),s.append("mcqID",this.questionData.question.ID);var n=e.isNew?"POST":"PUT";return Q({method:n,url:"/admin/quizzes/choices",data:s}).then((function(s){var n=e.ID;a.questionData.choices[t].ID=s.data.choice.ID,n===a.questionData.correctAnswer&&(a.questionData.correctAnswer=a.questionData.choices[t].ID)})).catch((function(e){console.log(e)}))},deleteQuestion:function(){var e=this,t=new FormData;t.append("id",this.questionData.question.ID),t.append("quizID",this.quiz.ID),Q({method:"DELETE",url:"/admin/quizzes/questions/mcq",data:t}).then((function(){e.$emit("deleteQuestion",{id:e.questionData.question.ID})}))},changeEditMode:function(){this.$emit("update:editMode",!this.editMode)},previewImage:function(){void 0===this.questionData.question.image?this.questionData.question.imageSrc="":this.questionData.question.imageSrc=URL.createObjectURL(this.questionData.question.image)}},watch:{question:function(){this.questionData={question:{ID:this.question.question.ID||0,text:this.question.question.text||"",totalMark:this.question.question.totalMark||1,image:[],imagePath:this.question.question.imagePath||"",imageSrc:this.question.question.imageSrc||""},correctAnswer:this.question.correctAnswer||-1,choices:this.question.choices||[]},this.choicesToBeDeleted=[],this.totalCreatedChoices=4,this.canCreateNew=!0},isNew:function(e){this.newQuestion=e}}},Ka=Za,Ja=a("23a7"),Xa=a("269a"),es=a.n(Xa),ts=a("a293"),as=Object(m["a"])(Ka,La,Ua,!1,null,null,null),ss=as.exports;p()(as,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VFileInput:Ja["a"],VImg:Mt["a"],VRadioGroup:sa["a"],VRow:pe["a"],VSpacer:G["a"],VTextField:H["a"],VTextarea:le["a"],VToolbar:nt["a"]}),es()(as,{ClickOutside:ts["a"]});var ns=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{outlined:""}},[a("v-list-item",[a("v-list-item-content",[a("v-col",[a("p",[e._v("MCQs")]),a("v-btn-toggle",{attrs:{tile:"",color:"deep-purple accent-3",group:""},on:{change:e.changeSelectedQuestion}},[a("v-row",{attrs:{dense:""}},[e._l(e.questions,(function(t,s){return a("v-col",{key:s,attrs:{cols:"3"}},[a("v-btn",{staticClass:"rounded-circle",attrs:{value:s,disabled:e.selectedQuestion===s||e.editMode}},[e._v(" "+e._s(s+1)+" ")])],1)})),a("v-col",{attrs:{cols:"3"}},[a("v-btn",{staticClass:"rounded-circle",attrs:{color:"primary",value:e.questions.length,disabled:e.editMode},on:{click:function(){return e.$emit("createPlaceholder")}}},[a("v-icon",[e._v("mdi-plus")])],1)],1)],2)],1),a("v-row",[e.editMode?a("span",[e._v("Save the current question to navigate")]):e._e()])],1)],1)],1)],1)},is=[],os={name:"QuestionsNavigator",props:["questions","selectedQuestion","editMode"],methods:{changeSelectedQuestion:function(e){void 0!==e&&this.$emit("update:selectedQuestion",e)}}},rs=os,ls=a("a609"),cs=Object(m["a"])(rs,ns,is,!1,null,"808d0262",null),ds=cs.exports;p()(cs,{VBtn:h["a"],VBtnToggle:ls["a"],VCard:L["a"],VCol:ve["a"],VIcon:Y["a"],VListItem:Me["a"],VListItemContent:$e["a"],VRow:pe["a"]});var us={name:"Quiz",components:{QuestionsNavigator:ds,AppBar:Nt,Question:ss},data:function(){return{questions:[],admin:!0,quiz:null,selectedQuestion:0,editMode:!1,newQuestion:!1,fetch:{questions:!1,quiz:!1}}},methods:{getQuiz:function(){return Q({method:"GET",url:"/quizzes/quiz",params:{quizHash:this.$route.params.quizHash}})},getQuestions:function(){var e=this;Q({method:"GET",url:"/quizzes/questions",params:{quizID:this.quiz.ID}}).then((function(t){e.questions=t.data.mcqs;for(var a=0;a<e.questions.length;a++)e.questions[a].question.imageSrc=e.questions[a].question.imagePath;e.fetch.questions=!0}))},createPlaceholder:function(){this.editMode=!0,this.newQuestion=!0,this.questions.push({question:{},choices:[{ID:0,text:"A",isNew:!0},{ID:1,text:"B",isNew:!0},{ID:2,text:"C",isNew:!0},{ID:3,text:"D",isNew:!0}]})},updateQuestion:function(e){e.choices.forEach((function(t,a){e.choices[a].isNew=!1})),this.questions[this.selectedQuestion]=e,this.newQuestion=!1},deleteQuestion:function(){this.selectedQuestion>=this.questions.length-1?(this.selectedQuestion=this.questions.length-2,this.questions.splice(-1,1)):this.questions.splice(this.selectedQuestion,1)}},mounted:function(){var e=this;this.getQuiz().then((function(t){e.quiz=t.data.quiz,e.fetch.quiz=!0,e.getQuestions()}))}},ms=us,vs=Object(m["a"])(ms,Na,Ba,!1,null,null,null),ps=vs.exports;p()(vs,{VApp:D["a"],VCol:ve["a"],VContainer:Rt["a"],VMain:Yt["a"],VRow:pe["a"]});var hs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Quiz"}}),a("v-main",[a("v-container",[a("v-row",[a("v-col",{staticClass:"col-12 col-md-9"},[e.fetch.questions?a("Question",{attrs:{question:e.questions[e.selectedQuestion],mcq:!0,"selected-choice":e.submissions[e.selectedQuestion],"selected-question":e.selectedQuestion,"disable-previous":0===e.selectedQuestion,"disable-next":e.selectedQuestion===e.questions.length-1,isReview:e.isReview,saving:e.saving,quiz:e.quiz},on:{updateChoice:e.updateChoice,"update:selectedQuestion":function(t){e.selectedQuestion=t},"update:selected-question":function(t){e.selectedQuestion=t}}}):e._e()],1),null!==e.quiz?a("v-col",{staticClass:"col-12 col-md-3"},[e.fetch.quiz&&e.fetch.questions?a("QuestionsNavigator",{attrs:{submissions:e.submissions,questions:e.questions,"selected-question":e.selectedQuestion,isReview:e.isReview,quiz:e.quiz},on:{"update:selectedQuestion":function(t){e.selectedQuestion=t},"update:selected-question":function(t){e.selectedQuestion=t}}}):e._e()],1):e._e()],1)],1)],1)],1)},fs=[],gs=(a("cb29"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",flat:"",dark:""}},[a("v-spacer"),a("span",[e._v("Marks")]),a("v-col",{attrs:{cols:"3",md:"2"}},[[a("v-btn",{attrs:{icon:"",large:"",readonly:!0}},[e._v(" "+e._s(e.question.question.totalMark)+" ")])]],2)],1),a("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.question.question.text)+" "),e.question.question.imagePath.length>0?a("v-img",{attrs:{src:e.question.question.imagePath}}):e._e()],1),a("v-card-text",[a("v-radio-group",{attrs:{readonly:e.isReview,disabled:e.isReview||e.saving,column:""},model:{value:e.updatedChoice,callback:function(t){e.updatedChoice=t},expression:"updatedChoice"}},e._l(e.question.choices,(function(t,s){return a("v-radio",{key:s,staticClass:"pa-1",class:e.getLabelColor(t),attrs:{value:t.ID,label:t.text}})})),1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:"secondary",disabled:e.disablePrevious},on:{click:function(t){return e.updateSelectedQuestion(-1)}}},[e._v("Previous")]),a("v-spacer"),a("v-btn",{attrs:{color:"secondary",disabled:e.disableNext},on:{click:function(t){return e.updateSelectedQuestion(1)}}},[e._v("Next")])],1)],1)}),bs=[],_s={name:"Question",props:["question","mcq","selectedChoice","selectedQuestion","disablePrevious","disableNext","isReview","quiz"],data:function(){return{saving:!1}},methods:{updateSelectedChoice:function(e){var t=this;this.saving=!0;var a=null===this.selectedChoice?"POST":"PUT",s=new FormData;s.append("mcqID",this.question.question.ID),s.append("quizID",this.quiz.ID),s.append("userResult",e),Q({method:a,url:"/quizzes/submissions/mcq",data:s}).then((function(){t.$store.dispatch("viewSuccessSnackbar","Question #"+(t.selectedQuestion+1)+" has been saved successfully"),t.$emit("updateChoice",{choice:e,status:!0})})).catch((function(){t.$store.dispatch("viewErrorSnackbar","Error saving question #"+(t.selectedQuestion+1)+". Please refresh the page and try again"),t.$emit("updateChoice",{choice:e,status:!1})})).finally((function(){t.saving=!1}))},updateSelectedQuestion:function(e){this.disablePrevious&&-1===e||this.disableNext&&1===e||this.$emit("update:selectedQuestion",this.selectedQuestion+e)},getLabelColor:function(e){return this.isReview&&e.ID===this.question.correctAnswer?" highlighted success":this.isReview&&e.ID===this.selectedChoice?"highlighted red":""}},computed:Object(o["a"])({updatedChoice:{get:function(){return this.selectedChoice},set:function(e){this.isLoggedIn?this.updateSelectedChoice(e):(this.$store.dispatch("viewSuccessSnackbar","Question #"+(this.selectedQuestion+1)+" has been saved successfully"),this.$emit("updateChoice",{choice:e,status:!0}))}}},Object(c["b"])(["isLoggedIn"]))},ws=_s,Ds=(a("44f5"),Object(m["a"])(ws,gs,bs,!1,null,"470f60b0",null)),ys=Ds.exports;p()(Ds,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VImg:Mt["a"],VRadio:aa["a"],VRadioGroup:sa["a"],VSpacer:G["a"],VToolbar:nt["a"]});var xs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{outlined:""}},[a("v-list-item",[a("v-list-item-content",[a("v-col",[a("p",[e._v("Questions")]),a("v-btn-toggle",{attrs:{tile:"",color:"deep-purple accent-3",group:""},on:{change:function(t){return e.$emit("update:selectedQuestion",t)}},model:{value:e.updatedSelection,callback:function(t){e.updatedSelection=t},expression:"updatedSelection"}},[a("v-row",{attrs:{dense:""}},e._l(e.submissions,(function(t,s){return a("v-col",{key:s,attrs:{cols:"3"}},[a("v-btn",{staticClass:"rounded-circle",attrs:{color:e.getButtonColor(s),value:s,disabled:e.updatedSelection===s}},[e._v(" "+e._s(s+1)+" ")])],1)})),1)],1),!e.isReview&&e.fetch.quizGrade?a("Timer",{attrs:{"end-time":e.validTill,"time-up":e.timeUp},on:{"update:timeUp":function(t){e.timeUp=t},"update:time-up":function(t){e.timeUp=t}}}):e._e()],1),e.isReview?a("v-card-subtitle",[e._v("Score: "+e._s(e.quizGrade.grade)+" / "+e._s(e.quiz.totalMark))]):a("v-dialog",{attrs:{width:"500",persistent:e.timeUp},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"success",dark:""}},"v-btn",n,!1),s),[e._v("Submit")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2"},[e.timeUp?a("div",[e._v("Time's Up")]):a("div",[e._v("Confirmation")])]),a("v-card-text",[a("QuizReview",{attrs:{submissions:e.submissions}})],1),e.timeUp?e._e():a("v-card-subtitle",[e._v("Submit all answers and exit ?")]),a("v-divider"),e.timeUp?a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"secondary",to:{name:"Quizzes"}}},[e._v("OK")])],1):a("v-card-actions",[a("v-btn",{attrs:{color:"secondary",text:""},on:{click:e.hideDialog}},[e._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"success",text:""},on:{click:e.exit}},[e._v("Confirm")])],1)],1)],1)],1)],1)],1)},ks=[],Vs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-simple-table",{attrs:{dense:""}},[[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Question Number")]),a("th",{staticClass:"text-left"},[e._v("Status")])])]),a("tbody",e._l(e.submissions,(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(s+1))]),null!==t?a("td",{staticClass:"success--text"},[e._v("Saved")]):a("td",{staticClass:"red--text"},[e._v("Empty")])])})),0)]],2)},Cs=[],Ts={name:"QuizReview",props:["submissions"],data:function(){return{}}},Ss=Ts,zs=a("1f4f"),qs=Object(m["a"])(Ss,Vs,Cs,!1,null,null,null),Ps=qs.exports;p()(qs,{VSimpleTable:zs["a"]});var Is={name:"QuestionsNavigator",components:{QuizReview:Ps,Timer:qa},computed:Object(o["a"])({},Object(c["b"])(["isLoggedIn"])),props:["selectedQuestion","submissions","questions","isReview","quiz"],data:function(){return{updatedSelection:this.selectedQuestion||0,quizGrade:{},dialog:!1,timeUp:!1,validTill:null,fetch:{quizGrade:!1}}},methods:{getButtonColor:function(e){return this.isReview?this.submissions[e]===this.questions[e].correctAnswer?"success":"red":this.updatedSelection===e?"primary":null===this.submissions[e]?"secondary":"light-blue"},checkQuiz:function(){!this.isReview&&((new Date).getTime()<new Date(this.quiz.startTime).getTime()||(new Date).getTime()>new Date(this.validTill).getTime())||this.isReview&&(new Date).getTime()<new Date(this.quiz.endTime)?(this.$router.push({name:"Quizzes"}),this.$store.dispatch("viewErrorSnackbar","Invalid request")):this.getQuizPermission()},getQuizPermission:function(){var e=this;Q({method:"GET",url:"/payments/week",params:{eventDate:new Date(this.quiz.startTime).getTime()}}).then((function(t){t.data.status||(e.$router.push({name:"Quizzes"}),e.$store.dispatch("viewErrorSnackbar","You don't have access to take this quiz. Contact the administrator for help"))}))},createQuizGrade:function(){var e=new FormData;return e.append("quizID",this.quiz.ID),Q({method:"POST",url:"/quizzes/grades",data:e})},getQuizGrade:function(){var e=this;Q({method:"GET",url:"/quizzes/grades",params:{quizID:this.quiz.ID}}).then((function(t){e.quizGrade=t.data.quizGrade[0]}))},hideDialog:function(){this.dialog=!1},exit:function(){this.hideDialog(),this.$router.push({name:"Quizzes"})}},watch:{selectedQuestion:function(e){this.updatedSelection=e},timeUp:function(e){e&&(this.dialog=!0)}},mounted:function(){var e=this;if(this.isLoggedIn)this.isReview?this.getQuizGrade():this.createQuizGrade().then((function(t){e.validTill=t.data.validTill,e.fetch.quizGrade=!0,e.checkQuiz()}));else{var t=0;this.questions.forEach((function(a,s){a.correctAnswer===e.submissions[s]&&t++})),this.quizGrade={grade:t}}}},As=Is,js=Object(m["a"])(As,xs,ks,!1,null,"792f6163",null),Os=js.exports;p()(js,{VBtn:h["a"],VBtnToggle:ls["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VDialog:F["a"],VDivider:R["a"],VListItem:Me["a"],VListItemContent:$e["a"],VRow:pe["a"],VSpacer:G["a"]});var Es=a("9dcf"),Qs={name:"Quiz",components:{AppBar:Nt,QuestionsNavigator:Os,Question:ys},data:function(){return{questions:[],submissions:[],selectedQuestion:0,quiz:null,isReview:"review"===this.$route.params.action,saving:!1,fetch:{questions:!1,quiz:!1}}},computed:Object(o["a"])({},Object(c["b"])(["userData","isLoggedIn"])),methods:{getQuestions:function(){var e=this;return Object(mt["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Q({method:"GET",url:"/quizzes/questions",params:{quizID:e.quiz.ID}});case 2:a=t.sent,e.questions=a.data.mcqs,e.submissions=Array(e.questions.length).fill(null),e.selectedQuestion=0,Q({method:"GET",url:"/quizzes/submissions",params:{quizID:e.quiz.ID}}).then((function(t){for(var a=t.data.mcqSubmissions,s=0;s<e.questions.length;s++)for(var n=0;n<a.length;n++)e.questions[s].question.ID===a[n].mcqID&&e.submissions.splice(s,1,a[n].userResult);e.fetch.questions=!0}));case 7:case"end":return t.stop()}}),t)})))()},updateChoice:function(e){var t=this;return Object(mt["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.status){a.next=4;break}t.submissions.splice(t.selectedQuestion,1,e.choice),a.next=8;break;case 4:return s=t.submissions[t.selectedQuestion],a.next=7,t.submissions.splice(t.selectedQuestion,1,0);case 7:t.submissions.splice(t.selectedQuestion,1,s);case 8:case"end":return a.stop()}}),a)})))()},getQuiz:function(){return Q({method:"GET",url:"/quizzes/quiz",params:{quizHash:this.$route.params.quizHash}})}},created:function(){var e=this;this.isLoggedIn?this.getQuiz().then((function(t){e.quiz=t.data.quiz,e.getQuestions(),e.fetch.quiz=!0})):(this.questions=Es,this.submissions=this.questions.map((function(){var e=Math.floor(8*Math.random()+1);return e>4?null:e})),"CURRENT"===this.$route.params.quizHash?this.quiz=Pa.current[0]:this.quiz=Pa.past[0],this.fetch.quiz=!0,this.fetch.questions=!0)}},Ms=Qs,$s=Object(m["a"])(Ms,hs,fs,!1,null,null,null),Ns=$s.exports;p()($s,{VApp:D["a"],VCol:ve["a"],VContainer:Rt["a"],VMain:Yt["a"],VRow:pe["a"]});var Bs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Grades"}}),a("v-main",[a("v-container",[a("DataTable",{attrs:{title:"Quizzes"}})],1)],1)],1)},Ls=[],Us=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.grades,"item-key":"user.username",loading:e.loading,search:e.search,"single-expand":"",expanded:e.expanded,"show-expand":"","footer-props":{"show-current-page":!0,"show-first-last-page":!0}},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-row",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v(" "+e._s(e.title)+" ")]),a("v-spacer"),a("v-col",{attrs:{cols:"2",align:"right"}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[e.userData.admin?a("v-btn",e._g(e._b({attrs:{icon:"",loading:e.loadingPDF},on:{click:e.getGradesPDF}},"v-btn",n,!1),s),[a("v-icon",{attrs:{large:""}},[e._v("mdi-pdf-box")])],1):e._e()]}}])},[a("span",[e._v("Download as PDF")])])],1),a("v-col",{attrs:{cols:"5",sm:"3"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({staticClass:"mt-5",attrs:{label:"Month",readonly:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-text-field",n,!1),s))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{type:"month","no-title":"",scrollable:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.saveMonth}},[e._v("OK")])],1)],1)],1),e.userData.admin?a("v-col",{attrs:{cols:"5",sm:"3"}},[a("v-text-field",{attrs:{"prepend-icon":"mdi-magnify",clearable:"",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1):e._e()],1)],1)]},proxy:!0},e.$vuetify.breakpoint.smAndUp&&e.headers.length>0?{key:"body.prepend",fn:function(t){return[a("tr",[a("td",{attrs:{colspan:"2"}},[e._v("Total Mark")]),e._l(e.quizzes,(function(t){return a("td",{key:t.ID},[e._v(" "+e._s(t.totalMark)+" ")])})),a("td",[e._v(e._s(e.quizzesTotalMarks))])],2)]}}:null,{key:"expanded-item",fn:function(t){var s=t.headers,n=t.item;return[a("td",{attrs:{colspan:s.length}},[e._v(" Phone Number: "+e._s(n.user.phoneNumber)+" "),a("v-spacer"),e._v(" Parent Number: "+e._s(n.user.parentNumber)+" ")],1)]}}],null,!0)})},Fs=[],Rs=(a("99af"),a("25f0"),a("fbc1")),Ys={name:"DataTable",props:["title"],data:function(){return{loading:!1,search:"",dialog:!1,expanded:[],date:(new Date).toISOString().substr(0,7),menu:!1,headers:[],grades:[],quizzes:[],quizzesTotalMarks:0,loadingPDF:!1}},computed:Object(o["a"])(Object(o["a"])({url:function(){return this.userData.admin?"admin/quizzes/grades/month":"quizzes/grades/month"}},Object(c["b"])(["userData","classes","isLoggedIn"])),{},{selectedClass:function(){return this.isLoggedIn?this.classes.values[this.classes.selectedClass].classHash:""}}),watch:{selectedClass:function(){this.getAllGrades()}},methods:{saveMonth:function(){this.$refs.menu.save(this.date),this.isLoggedIn&&this.getAllGrades()},getAllGrades:function(){var e=this;this.loading=!0,Q({method:"GET",url:this.url,params:{month:new Date(this.date).getTime()}}).then((function(t){e.headers=[{text:"",value:"data-table-expand"},{text:"Full Name",value:"user.fullName"}],e.quizzesTotalMarks=t.data.quizzesTotalMarks,e.grades=t.data.grades,e.quizzes=t.data.quizzes,e.quizzes.forEach((function(t){e.$vuetify.breakpoint.mdAndUp?e.headers.push({text:"".concat(t.title),value:t.ID.toString()}):e.headers.push({text:"".concat(t.title," (").concat(t.totalMark,")"),value:t.ID.toString()})})),e.headers.push({text:"Total",value:"total"})})).finally((function(){e.loading=!1}))},getGradesPDF:function(){var e=this;this.loadingPDF=!0,Q({method:"GET",url:"/admin/quizzes/grades/month/pdf",responseType:"blob",params:{month:new Date(this.date).getTime()}}).then((function(e){var t=URL.createObjectURL(e.data);window.open(t,"_blank")})).catch((function(){e.$store.dispatch("viewErrorSnackbar","Unexpected error occurred, please try again later")})).finally((function(){e.loadingPDF=!1}))}},created:function(){var e=this;if(this.isLoggedIn)this.getAllGrades();else{this.headers=[{text:"Full Name",value:"user.fullName"}];var t=Rs.quizzes;t.forEach((function(t){e.$vuetify.breakpoint.mdAndUp?e.headers.push({text:"".concat(t.title),value:t.ID.toString()}):e.headers.push({text:"".concat(t.title," (").concat(t.totalMark,")"),value:t.ID.toString()})})),this.headers.push({text:"Total",value:"total"}),this.quizzes=t,this.grades=Rs.grades,this.quizzesTotalMarks=75}}},Gs=Ys,Hs=Object(m["a"])(Gs,Us,Fs,!1,null,null,null),Ws=Hs.exports;p()(Hs,{VBtn:h["a"],VCol:ve["a"],VDataTable:Xe["a"],VDatePicker:et["a"],VIcon:Y["a"],VMenu:tt["a"],VRow:pe["a"],VSpacer:G["a"],VTextField:H["a"],VToolbar:nt["a"],VToolbarTitle:it["b"],VTooltip:W["a"]});var Zs={name:"Grades",components:{AppBar:Nt,DataTable:Ws},data:function(){return{tab:0}}},Ks=Zs,Js=Object(m["a"])(Ks,Bs,Ls,!1,null,"41a28028",null),Xs=Js.exports;p()(Js,{VApp:D["a"],VContainer:Rt["a"],VMain:Yt["a"]});var en=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Reset Password"}}),a("v-main",[a("v-container",[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Reset Password")])],1),a("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.invalid;return[a("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("v-card-text",[a("v-row",[a("v-col",[a("Password",{attrs:{password:e.user.oldPassword,label:"Old Password"},on:{"update:password":function(t){return e.$set(e.user,"oldPassword",t)}}})],1)],1),a("v-row",[a("v-col",[a("Password",{attrs:{password:e.user.newPassword,label:"New Password"},on:{"update:password":function(t){return e.$set(e.user,"newPassword",t)}}})],1)],1),a("v-row",[a("v-col",[a("Password",{attrs:{password:e.user.confirmPassword,label:"Confirm Password"},on:{"update:password":function(t){return e.$set(e.user,"confirmPassword",t)}}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",type:"submit",disabled:s,loading:e.loading}},[e._v("Change Password")])],1)],1)]}}])})],1)],1)],1)],1)],1)],1)},tn=[],an={name:"ResetPassword",components:{Password:bt,AppBar:Nt},data:function(){return{user:{oldPassword:"",newPassword:"",confirmPassword:""},loading:!1}},methods:{submit:function(){var e=this;this.loading=!0;var t=new FormData;t.append("oldPassword",this.user.oldPassword),t.append("newPassword",this.user.confirmPassword),t.append("confirmPassword",this.user.newPassword),Q({method:"PUT",url:"/change-password",data:t}).then((function(){e.$router.push({name:"Announcements"})})).finally((function(){e.loading=!1}))}}},sn=an,nn=Object(m["a"])(sn,en,tn,!1,null,"384e5f7a",null),on=nn.exports;p()(nn,{VApp:D["a"],VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardText:U["c"],VCol:ve["a"],VContainer:Rt["a"],VMain:Yt["a"],VRow:pe["a"],VSpacer:G["a"],VToolbar:nt["a"],VToolbarTitle:it["b"]});var rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Assignments"}}),a("v-main",[a("v-container",[a("AssignmentsTable")],1)],1)],1)},ln=[],cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.assignments,loading:e.loading,options:e.options,"server-items-length":e.totalAssignments,"footer-props":{"items-per-page-options":[10,15,20],"show-current-page":!0,"show-first-last-page":!0},"items-per-page":10,"must-sort":"","sort-by":"CreatedAt","sort-desc":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v(" Assignments ")]),a("v-spacer"),a("v-col",{attrs:{md:"3"}},[e.userData.admin?a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.view({hash:-1})}}},[e._v("Create Assignment ")]):e._e()],1)],1)]},proxy:!0},{key:"item.CreatedAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.CreatedAt.substr(0,10))+" ")]}},{key:"item.deadline",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.deadline.substr(0,10))+" ")]}},{key:"item.view",fn:function(t){var s=t.item;return[s.access||e.userData.admin?a("v-btn",{attrs:{small:""},on:{click:function(t){return e.view(s)}}},[e._v("View")]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"red",dark:""}},"v-icon",n,!1),s),[e._v("mdi-close-circle")])]}}],null,!0)},[a("span",[e._v("You don't have access to view this assignment. If you think there's an error, please contact the administrator")])])]}}])})},dn=[],un=a("1c59"),mn={name:"AssignmentsTable",data:function(){return{loading:!1,options:{},headers:[{text:"Title",value:"title",sortable:!1},{text:"Created At",value:"CreatedAt"},{text:"Deadline",value:"deadline"},{text:"View",value:"view",sortable:!1}],assignments:[],totalAssignments:0}},mounted:function(){if(this.isLoggedIn)this.getAssignments();else{this.assignments=un;var e=new Date;this.assignments[0].CreatedAt=new Date((new Date).setDate(e.getDate()-3)).toISOString(),this.assignments[0].deadline=new Date((new Date).setDate(e.getDate()+3)).toISOString(),this.totalAssignments=this.assignments.length}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["userData","classes","isLoggedIn"])),{},{selectedClass:function(){return this.isLoggedIn?this.classes.values[this.classes.selectedClass].classHash:""}}),methods:{getAssignments:function(){var e=this;this.loading=!0;for(var t=this.options,a=t.sortBy,s=t.sortDesc,n=t.page,i=t.itemsPerPage,o=[],r=0;r<a.length;r++)"CreatedAt"===a[r]?o.push("created_at"):o.push(a[r].replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())})));Q({method:"GET",url:"/assignments",params:{page:n,itemsPerPage:i,sortBy:o,sortDesc:s}}).then(function(){var t=Object(mt["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.totalAssignments=a.data.totalAssignments,e.assignments=a.data.assignments,s=[],e.assignments.forEach((function(t){s.push(e.getAssignmentPermission(t))})),t.next=6,Promise.all(s).then((function(t){e.assignments.forEach((function(a,s){e.assignments[s].access=t[s].data.status}))}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).finally((function(){e.loading=!1}))},getAssignmentPermission:function(e){return Q({method:"GET",url:"/payments/week",params:{eventDate:new Date(e.CreatedAt).getTime()}})},view:function(e){this.$router.push({name:"Assignment",params:{assignmentHash:e.hash}})}},watch:{options:{handler:function(){this.isLoggedIn&&this.getAssignments()},deep:!0},selectedClass:function(){this.options.page=1,this.getAssignments()}}},vn=mn,pn=Object(m["a"])(vn,cn,dn,!1,null,"57691e5f",null),hn=pn.exports;p()(pn,{VBtn:h["a"],VCol:ve["a"],VDataTable:Xe["a"],VIcon:Y["a"],VSpacer:G["a"],VToolbar:nt["a"],VToolbarTitle:it["b"],VTooltip:W["a"]});var fn={name:"Assignments",components:{AssignmentsTable:hn,AppBar:Nt}},gn=fn,bn=Object(m["a"])(gn,rn,ln,!1,null,"2c2bc2fc",null),_n=bn.exports;p()(bn,{VApp:D["a"],VContainer:Rt["a"],VMain:Yt["a"]});var wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Assignment"}}),a("v-main",[a("v-container",[e.userData.admin?a("AdminAssignmentData"):a("StudentAssignmentData")],1)],1)],1)},Dn=[],yn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.invalid;return[a("form",{on:{submit:function(t){return t.preventDefault(),e.createAssignment(t)}}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{label:"Title","prepend-icon":"mdi-format-title",type:"text","error-messages":s},model:{value:e.assignment.title,callback:function(t){e.$set(e.assignment,"title",t)},expression:"assignment.title"}})]}}],null,!0)})],1),a("v-col",{attrs:{cols:"6",sm:"3"}},[a("v-icon",[e._v("mdi-calendar")]),a("span",[e._v("Deadline")]),a("Datetime",{attrs:{type:"datetime","use12-hour":"","input-class":"rounded-0 grey lighten-3","min-datetime":(new Date).toISOString()},model:{value:e.assignment.deadline,callback:function(t){e.$set(e.assignment,"deadline",t)},expression:"assignment.deadline"}}),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.assignment.deadline,expression:"assignment.deadline"},{name:"show",rawName:"v-show",value:!1,expression:"false"}],domProps:{value:e.assignment.deadline},on:{input:function(t){t.target.composing||e.$set(e.assignment,"deadline",t.target.value)}}}),a("div",{staticClass:"red--text"},[e._v(e._s(s[0]))])]}}],null,!0)})],1),a("v-col",{attrs:{cols:"6",sm:"3"}},[a("ValidationProvider",{attrs:{rules:"required|numeric"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{label:"Total Mark","prepend-icon":"mdi-sticker-check",type:"text","error-messages":s},model:{value:e.assignment.totalMark,callback:function(t){e.$set(e.assignment,"totalMark",t)},expression:"assignment.totalMark"}})]}}],null,!0)})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-file-input",{attrs:{chips:"","show-size":"",label:"Questions","prepend-icon":"mdi-format-list-text"},model:{value:e.assignment.questionsBytes,callback:function(t){e.$set(e.assignment,"questionsBytes",t)},expression:"assignment.questionsBytes"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-file-input",{attrs:{chips:"","show-size":"",label:"Model Answer","prepend-icon":"mdi-format-list-text",hint:"This file will be shown AFTER the deadline by "+e.assignment.modelAnswerPeriod+" hour(s)","persistent-hint":""},model:{value:e.assignment.modelAnswerBytes,callback:function(t){e.$set(e.assignment,"modelAnswerBytes",t)},expression:"assignment.modelAnswerBytes"}})],1),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-select",{attrs:{label:"Show Model Answer After",items:e.hoursToDisplayModelAnswer},model:{value:e.assignment.modelAnswerPeriod,callback:function(t){e.$set(e.assignment,"modelAnswerPeriod",t)},expression:"assignment.modelAnswerPeriod"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[e.assignment.questions.length>0?a("v-btn",{attrs:{outlined:"",loading:e.questionsLoading.value},on:{click:function(t){return e.getUrl(e.questionsLoading,e.assignment.questions)}}},[e._v(" Questions "),a("v-icon",[e._v("mdi-cloud-download")])],1):a("div",[e._v("We couldn't find the questions file for this assignment")])],1),a("v-col",{attrs:{cols:"12",md:"6"}},[e.assignment.modelAnswer.length>0?a("v-btn",{attrs:{outlined:"",loading:e.answersLoading.value},on:{click:function(t){return e.getUrl(e.answersLoading,e.assignment.modelAnswer)}}},[e._v(" Model Answer "),a("v-icon",[e._v("mdi-cloud-download")])],1):a("div",[e._v("No model answer associated with this question")])],1)],1),a("v-btn",{attrs:{color:"primary",type:"submit",block:"",disabled:s,loading:e.loading}},[e._v(" Save Assignment ")])],1)]}}])}),a("SubmissionsTable",{attrs:{deadline:e.assignment.deadline,"total-mark":e.assignment.totalMark}})],1)},xn=[],kn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v(" Submissions "),a("v-spacer"),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:"",loading:e.loadingPDF},on:{click:e.getSubmissionsPDF}},"v-btn",n,!1),s),[a("v-icon",{attrs:{large:""}},[e._v("mdi-pdf-box")])],1)]}}])},[a("span",[e._v("Download as PDF")])]),a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"",clearable:""},on:{input:e.search},model:{value:e.searchBy,callback:function(t){e.searchBy=t},expression:"searchBy"}})],1)],1),a("v-data-table",{attrs:{headers:e.headers,items:e.submissions,"item-key":"uploadedAt",options:e.options,"server-items-length":e.totalSubmissions,loading:e.loading,"footer-props":{"items-per-page-options":[10,15,20],"show-current-page":!0,"show-first-last-page":!0},"items-per-page":10,"must-sort":"","sort-by":"uploadedAt","single-expand":"",expanded:e.expanded,"show-expand":""},on:{"update:options":function(t){e.options=t},"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item.fullName",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.user.fullName)+" ")]}},{key:"item.uploadedAt",fn:function(t){var a=t.item;return[e._v(" "+e._s(e._f("moment")(a.uploadedAt))+" ")]}},{key:"item.inTime",fn:function(t){var s=t.item;return[e.momentDifference(e.deadline,s.uploadedAt)?a("v-icon",[e._v("mdi-thumb-up")]):a("v-icon",[e._v("mdi-clipboard-alert")])]}},{key:"item.download",fn:function(t){var s=t.item;return[a("v-btn",{attrs:{"x-small":"",fab:"",loading:null===s.file},on:{click:function(t){return e.getSignedUrl(s)}}},[a("v-icon",[e._v("mdi-download")])],1)]}},{key:"item.mark",fn:function(t){var s=t.item;return[a("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":s.mark},on:{"update:returnValue":function(t){return e.$set(s,"mark",t)},"update:return-value":function(t){return e.$set(s,"mark",t)},save:function(t){return e.save(s)}},scopedSlots:e._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{rules:[e.validateMark],label:"Mark","single-line":"",counter:""},model:{value:s.mark,callback:function(t){e.$set(s,"mark",t)},expression:"item.mark"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(s.mark)+" ")])]}},{key:"item.feedback",fn:function(t){var s=t.item;return[a("v-edit-dialog",{attrs:{persistent:"",large:"","return-value":s.feedback},on:{"update:returnValue":function(t){return e.$set(s,"feedback",t)},"update:return-value":function(t){return e.$set(s,"feedback",t)},save:function(t){return e.save(s)}},scopedSlots:e._u([{key:"input",fn:function(){return[a("v-textarea",{attrs:{label:"Feedback",rows:"2",counter:""},model:{value:s.feedback,callback:function(t){e.$set(s,"feedback",t)},expression:"item.feedback"}})]},proxy:!0}],null,!0)},[s.feedback.length>20?a("div",[e._v(" "+e._s(s.feedback.substr(0,20))+"... ")]):a("div",[e._v(e._s(s.feedback))])])]}},{key:"item.graded",fn:function(t){var s=t.item;return[s.graded?a("div",[a("v-icon",[e._v("mdi-check-bold")])],1):a("div",[a("v-icon",[e._v("mdi-close-circle")])],1)]}},{key:"expanded-item",fn:function(t){var s=t.headers,n=t.item;return[a("td",{staticClass:"expanded-content",attrs:{colspan:s.length}},[e._v(" Feedback: "+e._s(n.feedback)+" ")])]}}])}),a("v-row",[a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.saveSubmissionDialog,callback:function(t){e.saveSubmissionDialog=t},expression:"saveSubmissionDialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Please wait... "),a("v-progress-linear",{attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)],1)},Vn=[],Cn={name:"SubmissionsTable",props:["deadline","totalMark"],data:function(){var e=this;return{totalSubmissions:0,submissions:[],loading:!1,options:{},headers:[{text:"Full Name",value:"fullName"},{text:"Uploaded At",value:"uploadedAt"},{text:"In Time",value:"inTime",sortable:!1},{text:"Submission",value:"download",sortable:!1},{text:"Mark",value:"mark"},{text:"Graded",value:"graded",sortable:!1},{text:"Feedback",value:"feedback",sortable:!1,width:"15%"},{text:"",value:"data-table-expand"}],expanded:[],searchBy:"",validateMark:function(t){return t>=0&&t<=e.totalMark||"You must enter a valid mark value"},saveSubmissionDialog:!1,assignment:{},loadingPDF:!1}},mounted:function(){var e=this;Q({method:"GET",url:"/assignments/assignment",params:{assignmentHash:this.$route.params.assignmentHash}}).then((function(t){e.assignment=t.data.assignment,e.getSubmissions()}))},watch:{options:{handler:function(){this.getSubmissions()},deep:!0}},methods:{search:function(){this.options.page=1,this.getSubmissions()},getSubmissions:function(){var e=this;this.loading=!0,this.submissions=[];for(var t=this.options,a=t.sortBy,s=t.sortDesc,n=t.page,i=t.itemsPerPage,o=[],r=0;r<a.length;r++)o.push(a[r].replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())})));Q({method:"GET",url:"/admin/assignments/submissions",params:{assignmentID:this.assignment.ID,page:n,itemsPerPage:i,sortBy:o,sortDesc:s,searchBy:this.searchBy}}).then((function(t){e.totalSubmissions=t.data.totalSubmissions,e.submissions=t.data.submissions})).finally((function(){e.loading=!1}))},momentDifference:function(e,t){e=He()(e),t=He()(t);var a=e.diff(t,"minutes");return a>=0},save:function(e){var t=this;if(isNaN(e.mark)||e.mark<0||e.mark>this.totalMark)this.$store.dispatch("viewErrorSnackbar","You must put a valid mark value");else{this.saveSubmissionDialog=!0;var a=new FormData;a.append("userID",e.userID),a.append("assignmentHash",this.assignment.hash),a.append("mark",e.mark),a.append("feedback",e.feedback),Q({method:"PUT",url:"/admin/assignments/submissions",data:a}).then((function(t){e.graded=t.data.submission.graded,e.mark=t.data.submission.mark,e.feedback=t.data.submission.feedback})).finally((function(){t.saveSubmissionDialog=!1}))}},getSignedUrl:function(e){var t=e.file;e.file=null,Q({method:"GET",url:"/assignments/assignment/file",params:{originalUrl:t}}).then((function(e){var t=document.createElement("a");t.href=e.data.url,t.target="_blank",t.click()})).finally((function(){e.file=t}))},getSubmissionsPDF:function(){var e=this;this.loadingPDF=!0;for(var t=this.options,a=t.sortBy,s=t.sortDesc,n=[],i=0;i<a.length;i++)n.push(a[i].replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())})));Q({method:"GET",url:"/admin/assignments/submissions/pdf",responseType:"blob",params:{assignmentID:this.assignment.ID,page:0,itemsPerPage:0,sortBy:n,sortDesc:s}}).then((function(e){var t=URL.createObjectURL(e.data);window.open(t,"_blank")})).catch((function(){e.$store.dispatch("viewErrorSnackbar","Unexpected error occurred, please try again later")})).finally((function(){e.loadingPDF=!1}))}},filters:{moment:function(e){return He()(e).format("dddd Do MMM YYYY, h:mm a")}}},Tn=Cn,Sn=(a("c0dc"),a("7679")),zn=Object(m["a"])(Tn,kn,Vn,!1,null,"1c76d2b0",null),qn=zn.exports;function Pn(e,t,a){t.value=!0,Q({method:"GET",url:"/assignments/assignment/file",params:{originalUrl:a}}).then((function(e){var t=document.createElement("a");t.href=e.data.url,t.target="_blank",t.click()})).finally((function(){t.value=!1}))}p()(zn,{VBtn:h["a"],VCard:L["a"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VDataTable:Xe["a"],VDialog:F["a"],VEditDialog:Sn["a"],VIcon:Y["a"],VProgressLinear:at["a"],VRow:pe["a"],VSpacer:G["a"],VTextField:H["a"],VTextarea:le["a"],VTooltip:W["a"]});var In={name:"AssignmentData",components:{SubmissionsTable:qn},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["classes"])),{},{selectedClass:function(){return this.classes.values[this.classes.selectedClass].classHash}}),watch:{selectedClass:function(){this.$router.push({name:"Assignments"})}},data:function(){return{assignment:{CreatedAt:"",title:"",deadline:"",totalMark:10,modelAnswerPeriod:1,questionsBytes:[],modelAnswerBytes:[],questions:"",modelAnswer:""},loading:!1,questionsLoading:{value:!1},answersLoading:{value:!1},hoursToDisplayModelAnswer:[0,1,2,3,6,12]}},created:function(){var e=this,t=this.$route.params.assignmentHash;t<=0||Q({method:"GET",url:"/assignments/assignment",params:{assignmentHash:this.$route.params.assignmentHash}}).then((function(t){e.assignment=t.data.assignment}))},methods:{createAssignment:function(){var e=this;this.loading=!0;var t=this.assignment.ID,a=new FormData,s="";t>0?(s="PUT",a.append("id",t),a.append("hash",this.assignment.hash)):s="POST",a.append("title",this.assignment.title),a.append("selectedClass",this.selectedClass),a.append("deadline",Date.parse(this.assignment.deadline)),a.append("totalMark",this.assignment.totalMark),a.append("modelAnswerPeriod",this.assignment.modelAnswerPeriod),a.append("questions",this.assignment.questions),a.append("questionsFile",this.assignment.questionsBytes),a.append("modelAnswer",this.assignment.modelAnswer),a.append("modelAnswerFile",this.assignment.modelAnswerBytes),Q({method:s,url:"/admin/assignments",data:a}).then((function(){e.$router.push({name:"Assignments"})})).catch((function(e){return console.log(e)})).finally((function(){e.loading=!1}))},getUrl:function(e,t){Pn(this,e,t)}}},An=In,jn=(a("63d0"),a("b974")),On=Object(m["a"])(An,yn,xn,!1,null,"2334ad3b",null),En=On.exports;p()(On,{VBtn:h["a"],VCol:ve["a"],VFileInput:Ja["a"],VIcon:Y["a"],VRow:pe["a"],VSelect:jn["a"],VTextField:H["a"]});var Qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",{attrs:{align:"start",justify:"start"}},[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"elevation-12"},[a("v-card-title",[e._v(" "+e._s(e.assignment.title)+" "),a("v-spacer"),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{small:"",fab:"",color:"primary"}},s),[e._v(" "+e._s(e.assignment.totalMark)+" ")])]}}])},[a("span",[e._v("Total Mark")])])],1),a("v-card-subtitle",[e._v(" Deadline: "+e._s(e._f("moment")(e.assignment.deadline))+" ("+e._s(e._f("momentFromNow")(e.assignment.deadline))+") ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[e.isLoggedIn?e.assignment.questions.length>0?a("v-btn",{attrs:{outlined:"",loading:e.questionsLoading.value},on:{click:function(t){return e.getUrl(e.questionsLoading,e.assignment.questions)}}},[e._v(" Questions "),a("v-icon",[e._v("mdi-cloud-download")])],1):a("div",[e._v("We couldn't find the questions file for this assignment")]):a("v-btn",{attrs:{outlined:"",href:e.assignment.questions,target:"_blank"}},[e._v(" Questions"),a("v-icon",[e._v("mdi-cloud-download")])],1)],1),a("v-col",{attrs:{cols:"12",md:"6"}},[e.showModelAnswer?e.isLoggedIn?e.assignment.modelAnswer.length>0?a("v-btn",{attrs:{outlined:"",loading:e.answersLoading.value},on:{click:function(t){return e.getUrl(e.answersLoading,e.assignment.modelAnswer)}}},[e._v(" Model Answer "),a("v-icon",[e._v("mdi-cloud-download")])],1):a("div",[e._v("We couldn't find the model answer file for this assignment")]):a("v-btn",{attrs:{outlined:"",href:e.assignment.modelAnswer,target:"_blank"}},[e._v(" Model Answer "),a("v-icon",[e._v("mdi-cloud-download")])],1):a("div",[0===e.assignment.modelAnswerPeriod?a("span",[e._v(" The model answer will be available immediately after the deadline (if found) ")]):a("span",[e._v(" The model answer will be available after the deadline by "+e._s(e.assignment.modelAnswerPeriod)+" hour(s) (if found) ")])])],1)],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"elevation-12"},[a("v-card-title",[e._v("Your Submission")]),a("v-card-subtitle",[0!==e.submission.userID&&0!==e.submission.assignmentID?a("div",[e._v(" Submitted At: "+e._s(e._f("moment")(e.submission.uploadedAt))+" ("+e._s(e._f("momentDifference")(e.assignment.deadline,e.submission.uploadedAt))+") ")]):a("div",[e._v("You haven't submitted a solution yet")])]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"6"}},[0===e.submission.userID&&0===e.submission.assignmentID?a("div",[e._v(" Status: No Submission Found ")]):e.submission.graded?a("div",[e._v(" Status: Graded ")]):a("div",[e._v(" Status: Pending for Grading ")])]),e.submission.graded?a("v-col",{attrs:{cols:"6"}},[e._v(" Mark: "+e._s(e.submission.mark)+" / "+e._s(e.assignment.totalMark)+" ")]):e._e()],1),0!==e.submission.userID&&0!==e.submission.assignmentID?a("v-row",[a("v-col",{attrs:{cols:"12"}},[e.isLoggedIn?a("v-btn",{attrs:{outlined:"",loading:e.submissionLoading.value},on:{click:function(t){return e.getUrl(e.submissionLoading,e.submission.file)}}},[e._v(" Your Submission "),a("v-icon",[e._v("mdi-cloud-download")])],1):a("v-btn",{attrs:{outlined:"",href:e.submission.file,target:"_blank"}},[e._v(" Your Submission "),a("v-icon",[e._v("mdi-cloud-download")])],1)],1)],1):e._e(),a("v-row",[a("v-col",{attrs:{cols:"12"}},[e.submission.graded?0===e.submission.feedback.length?a("div",[e._v("There's no feedback associated with this submission")]):a("div",[e._v("Feedback: "+e._s(e.submission.feedback))]):a("v-file-input",{attrs:{chips:"","show-size":"",label:"Submission",hint:"If you updated the submission, the previous one will be deleted","persistent-hint":"","prepend-icon":"mdi-format-list-text"},model:{value:e.submission.bytes,callback:function(t){e.$set(e.submission,"bytes",t)},expression:"submission.bytes"}})],1)],1)],1),e.submission.graded?e._e():a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",loading:e.loading,disabled:void 0===e.submission.bytes},on:{click:e.pushSubmission}},[e._v(" Change Submission ")])],1)],1)],1)],1)],1)},Mn=[],$n={name:"AssignmentData",computed:Object(o["a"])({},Object(c["b"])(["isLoggedIn"])),data:function(){return{loading:!1,showModelAnswer:!1,assignment:{title:"",deadline:"",modelAnswerPeriod:1,questions:"",modelAnswer:"",totalMark:0},submission:{userID:0,assignmentID:0,uploadedAt:"",mark:0,graded:!1,file:"",feedback:"",bytes:[]},questionsLoading:{value:!1},answersLoading:{value:!1},submissionLoading:{value:!1}}},created:function(){var e=this;if(this.isLoggedIn)Q({method:"GET",url:"/assignments/assignment",params:{assignmentHash:this.$route.params.assignmentHash}}).then((function(t){e.assignment=t.data.assignment,e.showModelAnswer=He()(e.assignment.deadline).add(e.assignment.modelAnswerPeriod,"hours").isBefore(He()())&&e.assignment.modelAnswer.length>0,e.getSubmission()}));else{var t=this.$route.params.assignmentHash;if("CURRENT"===t){var a=new Date,s=un[0];s.CreatedAt=new Date((new Date).setDate(a.getDate()-3)),s.deadline=new Date((new Date).setDate(a.getDate()+3)),this.assignment=s}else this.assignment=un[1];this.submission=this.assignment.submission,this.showModelAnswer=He()(this.assignment.deadline).add(this.assignment.modelAnswerPeriod,"hours").isBefore(He()())&&this.assignment.modelAnswer.length>0}},methods:{getSubmission:function(){var e=this;Q({method:"GET",url:"/assignments/submissions/submission",params:{assignmentHash:this.assignment.hash}}).then((function(t){e.submission=t.data.submission}))},pushSubmission:function(){var e=this;this.loading=!0;var t=new FormData;t.append("assignmentID",this.assignment.ID),t.append("assignmentHash",this.assignment.hash),t.append("submissionFile",this.submission.bytes);var a=0===this.submission.userID&&0===this.submission.assignmentID?"POST":"PUT";Q({method:a,url:"/assignments/submissions",data:t}).then((function(){e.$router.push({name:"Assignments"})})).finally((function(){e.loading=!1}))},getUrl:function(e,t){Pn(this,e,t)}},filters:{moment:function(e){return He()(e).format("dddd Do MMM YYYY, h:mm a")},momentFromNow:function(e){return He()(e,"YYYYMMDD, h:mm a").startOf("minute").fromNow()},momentDifference:function(e,t){e=He()(e),t=He()(t);var a=e.diff(t,"minutes");return a>=0?"Early":"Late"}}},Nn=$n,Bn=Object(m["a"])(Nn,Qn,Mn,!1,null,"7f3b9aa2",null),Ln=Bn.exports;p()(Bn,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VFileInput:Ja["a"],VIcon:Y["a"],VRow:pe["a"],VSpacer:G["a"],VTooltip:W["a"]});var Un={name:"Assignment",components:{AdminAssignmentData:En,StudentAssignmentData:Ln,AppBar:Nt},computed:Object(o["a"])({},Object(c["b"])(["userData"]))},Fn=Un,Rn=Object(m["a"])(Fn,wn,Dn,!1,null,"8a756e1e",null),Yn=Rn.exports;p()(Rn,{VApp:D["a"],VContainer:Rt["a"],VMain:Yt["a"]});var Gn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Video"}}),a("v-main",[e.mounted?a("v-container",[e.userData.admin?a("AdminVideoParts",{attrs:{video:e.video}}):a("UserVideoParts",{attrs:{video:e.video}})],1):e._e()],1)],1)},Hn=[],Wn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-tabs",{attrs:{"background-color":"info",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab",[e._v("Content")]),a("v-tab",[e._v("Codes")]),a("v-tab",[e._v("Manual Access")])],1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("VideoContent",{attrs:{video:e.video}})],1),a("v-tab-item",[a("VideoCodes",{attrs:{video:e.video}})],1),a("v-tab-item",[a("VideoManualAccess",{attrs:{video:e.video}})],1)],1)],1)},Zn=[],Kn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-file-input",{attrs:{chips:"",multiple:"","show-size":"",counter:"",label:"Upload Video (You can select multiple files to be uploaded)"},model:{value:e.partsToUpload,callback:function(t){e.partsToUpload=t},expression:"partsToUpload"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[e.allParts.length>0?a("div",[e._v("You can reorder the parts using the handler on the left")]):e._e(),a("draggable",{staticClass:"list-group",attrs:{handle:".handle"},model:{value:e.allParts,callback:function(t){e.allParts=t},expression:"allParts"}},[a("transition-group",{attrs:{type:"transition",name:"flip-list"}},e._l(e.allParts,(function(t,s){return a("div",{key:t.name},[a("v-list-item",[a("v-list-item-icon",[a("v-icon",{staticClass:"reorder handle"},[e._v("mdi-reorder-horizontal")])],1),a("v-list-item-title",{staticClass:"list-group-item"},[t.isVideo?a("div",[e._v(" Part#"+e._s(e.player.getVideoPartNumber(t.ID,e.allParts))+": "+e._s(t.name)+" ")]):a("div",[e._v(" File: "+e._s(t.name)+" ")])]),t.ID?a("v-list-item-icon",[t.isVideo?a("v-btn",{attrs:{icon:""}},[a("v-icon",{on:{click:function(a){return e.viewPart(t,s)}}},[e._v("mdi-play")])],1):a("v-btn",{attrs:{icon:"",loading:null===t.link}},[a("v-icon",{on:{click:function(a){return e.player.getPDF(t)}}},[e._v("mdi-open-in-new")])],1)],1):e._e(),a("v-list-item-icon",[t.ID?a("ConfirmationDialog",{attrs:{"video-part":"",buttonText:"Delete",mainText:"Delete This Part?","deleted-item-name":t.name,message:"You won't be able to restore the deleted video part!!"},on:{confirm:function(a){return e.deletePart(a,t)}}}):e._e()],1)],1),a("v-divider")],1)})),0)],1),e.allParts.length>0?a("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.saveVideoParts}},[e._v("Save")]):e._e()],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[a("Player",{ref:"player",attrs:{video:e.video}})],1)],1),a("VideoPartWatches",{attrs:{parts:e.savedParts}}),a("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:e.progressDialog,callback:function(t){e.progressDialog=t},expression:"progressDialog"}},[a("v-card",[a("v-card-title",[e._v(" Please stand by ")]),a("v-card-text",e._l(e.progressIndicators,(function(t,s){return a("v-row",{key:t.id},[a("v-col",[a("v-progress-linear",{attrs:{value:t.value,height:"40",color:t.finished?"success":"blue-grey",indeterminate:t.value>99&&!t.finished},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.value;return[e._v(" Part #"+e._s(s+1)+": "+e._s(e.allParts[s].name)+" "),a("v-spacer"),t.finished?a("strong",[e.allParts[s].ID?a("span",[e._v("Updated")]):a("span",[e._v("Uploaded")]),a("v-icon",[e._v("mdi-thumb-up")])],1):t.value<=99?a("strong",[e._v(e._s(i)+"%")]):a("strong",[e._v("Finishing Up!")])]}}],null,!0)})],1)],1)})),1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.deleteLoading,callback:function(t){e.deleteLoading=t},expression:"deleteLoading"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Please wait, we're deleting the part "),a("v-progress-linear",{attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},Jn=[],Xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Video Name: "+e._s(e.video.title))])],1),a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Part Name: "+e._s(e.partName))])],1),a("v-card-text",[a("v-row",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{justify:"center",align:"center"}},[a("v-progress-circular",{attrs:{indeterminate:""}})],1),a("vue-plyr",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],ref:"plyr",on:{error:e.errorOccurred,play:e.play}},[a("video",{attrs:{autoplay:""}})])],1)],1)},ei=[],ti=(a("9911"),{name:"Player",props:["video"],computed:{player:function(){return this.$refs.plyr.player}},data:function(){return{partName:"",videoSource:[],loading:!1}},methods:{startPart:function(e,t){var s=this;this.loading=!0,this.partName="Part#".concat(t+1,": ").concat(e.name),Q({method:"GET",url:"videos/part",params:{id:e.ID}}).then((function(e){s.videoSource.splice(0,1,{src:e.data.url,size:1080})})).catch((function(){s.loading=!1,s.partName="Error fetching video link",s.player.poster=a("a097")}))},startStaticPart:function(e,t){this.loading=!0,this.partName="Part#".concat(t+1,": ").concat(e.name),this.videoSource.splice(0,1,{src:e.link,size:1080})},getPDF:function(e){var t=e.link;e.link=null,Q({method:"GET",url:"videos/part",params:{id:e.ID,originalUrl:t}}).then((function(e){var t=document.createElement("a");t.href=e.data.url,t.target="_blank",t.click()})).finally((function(){e.link=t}))},getVideoPartNumber:function(e,t){for(var a=1,s=0;s<t.length;s++){if(e===t[s].ID)return a;t[s].isVideo&&a++}},errorOccurred:function(){this.player.poster=a("a097"),this.loading=!1,this.$store.dispatch("viewErrorSnackbar","Unexpected error occurred, please try again")},stop:function(){this.player.stop()},play:function(){this.loading=!1}},watch:{videoSource:{handler:function(e){this.player.source={type:"video",sources:e}},deep:!0}}}),ai=ti,si=a("490a"),ni=Object(m["a"])(ai,Xn,ei,!1,null,"666c55ba",null),ii=ni.exports;p()(ni,{VCard:L["a"],VCardText:U["c"],VProgressCircular:si["a"],VRow:pe["a"],VToolbar:nt["a"],VToolbarTitle:it["b"]});var oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"elevation-12"},[a("v-card-title",[e._v(" Watches "),a("v-spacer"),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-select",{attrs:{items:e.parts.filter((function(e){return e.isVideo})),"item-text":"name","item-value":"ID",label:"Select Part",dense:"","append-outer-icon":0!==e.selectedID?"mdi-pdf-box":"",loading:e.loadingPDF},on:{change:function(t){e.options.page=1,e.getPartWatches()},"click:append-outer":e.downloadPDF},model:{value:e.selectedID,callback:function(t){e.selectedID=t},expression:"selectedID"}})],1)],1),a("v-data-table",{attrs:{headers:e.headers,items:e.watches,loading:e.loading,options:e.options,"server-items-length":e.totalWatches,"footer-props":{"items-per-page-options":[10,15,20],"show-current-page":!0,"show-first-last-page":!0},"items-per-page":10,"must-sort":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.User.full_name",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.user.fullName)+" ")]}},{key:"item.start_at",fn:function(t){var a=t.item;return[e._v(" "+e._s(e._f("moment")(a.startAt))+" ")]}},{key:"item.valid_till",fn:function(t){var a=t.item;return[e._v(" "+e._s(e._f("moment")(a.validTill))+" ")]}},{key:"item.actions",fn:function(t){var s=t.item;return[a("ConfirmationDialog",{attrs:{"user-watch":"",mainText:"Are you sure you want to delete?",message:"The student will be able to re-watch this video part","deleted-item-name":s.user.fullName,"second-confirm-name":s.videoPart.name},on:{confirm:function(t){return e.deleteUserWatch(s)}}})]}}])},[a("v-data-table-header",[e._v("Some Text")])],1)],1)},ri=[],li={name:"VideoPartWatches",components:{ConfirmationDialog:K},props:["parts"],data:function(){return{selectedID:0,headers:[{text:"Student Name",value:"User.full_name"},{text:"Start Time",value:"start_at"},{text:"End Time",value:"valid_till"},{text:"Actions",value:"actions",sortable:!1}],watches:[],loading:!1,options:{sortBy:["start_at"],sortDesc:["true"]},totalWatches:0,loadingPDF:!1}},methods:{getPartWatches:function(){var e=this;this.loading=!0;var t=this.options,a=t.sortBy,s=t.sortDesc,n=t.page,i=t.itemsPerPage;Q({method:"GET",url:"/admin/videos/watches/part",params:{partID:this.selectedID,page:n,itemsPerPage:i,sortBy:a,sortDesc:s}}).then((function(t){e.totalWatches=t.data.total,e.watches=t.data.watches})).finally((function(){e.loading=!1}))},downloadPDF:function(){var e=this;this.loadingPDF=!0;var t=this.options,a=t.sortBy,s=t.sortDesc;Q({method:"GET",url:"admin/videos/watches/part/pdf",responseType:"blob",params:{partID:this.selectedID,page:0,itemsPerPage:0,sortBy:a,sortDesc:s}}).then((function(e){var t=URL.createObjectURL(e.data);window.open(t,"_blank")})).catch((function(){e.$store.dispatch("viewErrorSnackbar","Unexpected error occurred, please try again later")})).finally((function(){e.loadingPDF=!1}))},deleteUserWatch:function(e){var t=this;this.loading=!0,Q({method:"DELETE",url:"/admin/videos/watches",params:{partID:e.videoPartID,userID:e.userID}}).then((function(){t.getPartWatches()})).finally((function(){t.loading=!1}))}},watch:{options:{handler:function(){this.getPartWatches()},deep:!0}},filters:{moment:function(e){return He()(e).format("dddd Do MMM YYYY, h:mm a")}}},ci=li,di=a("1e71"),ui=Object(m["a"])(ci,oi,ri,!1,null,"28ffa832",null),mi=ui.exports;p()(ui,{VCard:L["a"],VCardTitle:U["d"],VCol:ve["a"],VDataTable:Xe["a"],VDataTableHeader:di["a"],VSelect:jn["a"],VSpacer:G["a"]});var vi={name:"VideoContent",components:{VideoPartWatches:mi,Player:ii,ConfirmationDialog:K},props:["video"],data:function(){return{partsToUpload:[],savedParts:[],allParts:[],progressDialog:!1,progressIndicators:[],deleteLoading:!1}},watch:{partsToUpload:{handler:function(e){for(var t=0;t<this.allParts.length;t++)void 0===this.allParts[t].ID&&(this.allParts.splice(t,1),t--);this.allParts=this.allParts.concat(e)},deep:!0}},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}},player:function(){return this.$refs.player}},methods:{saveVideoParts:function(){var e=this;this.progressDialog=!0;var t=[];this.progressIndicators=[],this.allParts.forEach((function(a,s){t.push(e.saveVideoPart(s)),e.progressIndicators.push({value:0,id:s,finished:!1})})),Promise.all(t).then((function(){e.getParts()})).finally((function(){e.progressDialog=!1}))},saveVideoPart:function(e){var t=this,a=new FormData;a.append("videoPart",this.allParts[e]),a.append("id",this.allParts[e].ID),a.append("videoID",this.video.ID),a.append("fileName",this.allParts[e].name),a.append("number",e+1);var s=void 0===this.allParts[e].ID?"POST":"PUT";return Q({method:s,url:"/admin/videos/parts",data:a,onUploadProgress:function(a){var s=a.total;null!==s&&void 0!==s&&(t.progressIndicators[e].value=Math.round(100*a.loaded/s))}}).then((function(){t.progressIndicators[e].finished=!0}))},getParts:function(){var e=this;Q({method:"GET",url:"/videos/parts",params:{videoHash:this.$route.params.videoHash}}).then((function(t){e.savedParts=t.data.parts,e.allParts=[],e.allParts=e.allParts.concat(t.data.parts)}))},deletePart:function(e,t){var a=this;if(void 0===t.ID){var s=this.partsToUpload.indexOf(t);this.partsToUpload.splice(s,1)}else{this.deleteLoading=!0;var n=new FormData;n.append("id",t.ID),n.append("typedName",e.typedValue),Q({method:"DELETE",url:"/admin/videos/parts",data:n}).then((function(){a.getParts()})).finally((function(){a.deleteLoading=!1}))}},viewPart:function(e,t){this.player.startPart(e,t)}},mounted:function(){this.getParts()}},pi=vi,hi=(a("043c"),Object(m["a"])(pi,Kn,Jn,!1,null,"59b316d2",null)),fi=hi.exports;p()(hi,{VBtn:h["a"],VCard:L["a"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VDialog:F["a"],VDivider:R["a"],VFileInput:Ja["a"],VIcon:Y["a"],VListItem:Me["a"],VListItemIcon:Be["a"],VListItemTitle:$e["c"],VProgressLinear:at["a"],VRow:pe["a"],VSpacer:G["a"]});var gi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-card-title",[e._v(" Codes "),a("v-btn",{attrs:{loading:e.loading,icon:""}},[a("v-icon",{on:{click:e.getCodes}},[e._v("mdi-reload")])],1),a("v-spacer"),a("v-col",{attrs:{cols:"4",sm:"2"}},[a("v-text-field",{attrs:{hint:"Number of codes to generate","persistent-hint":"",type:"number",rules:[e.rules.positiveNumber]},model:{value:e.numberOfCodesToGenerate,callback:function(t){e.numberOfCodesToGenerate=t},expression:"numberOfCodesToGenerate"}})],1),a("v-btn",{attrs:{fab:"",color:"green",small:"",disabled:e.invalidGeneration,loading:e.loadingGenerating},on:{click:e.generateCodes}},[a("v-icon",[e._v("mdi-plus")])],1)],1),a("v-card-subtitle",[a("v-row",[a("v-col",[e._v(" Video Title: "+e._s(e.video.title)+" "),a("br"),a("v-radio-group",{attrs:{row:""},on:{change:function(t){e.options.page=1,e.getCodes()}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" Access given by: ")]},proxy:!0}]),model:{value:e.accessedBy,callback:function(t){e.accessedBy=t},expression:"accessedBy"}},[a("v-radio",{attrs:{label:"Manual",value:"manual"}}),a("v-radio",{attrs:{label:"Code",value:"code"}}),a("v-radio",{attrs:{label:"Both",value:"both"}})],1)],1),a("v-col",{attrs:{cols:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Search by code, generated by, or used by","prepend-icon":"mdi-magnify",loading:e.loadingPDF,"append-outer-icon":e.loadingPDF?"":"mdi-pdf-box"},on:{input:e.getCodes,"click:append-outer":e.generateAccessPDF},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.codes,loading:e.loading,options:e.options,"server-items-length":e.totalCodes,"footer-props":{"items-per-page-options":[10,15,20,-1],"show-current-page":!0,"show-first-last-page":!0},"items-per-page":10,"must-sort":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.value",fn:function(t){var s=t.item;return[s.manual?a("div",[e._v("Manual Access")]):a("div",[e._v(e._s(s.value))])]}},{key:"item.created_at",fn:function(t){var a=t.item;return[e._v(" "+e._s(e._f("momentFormatDate")(a.CreatedAt))+" ")]}},{key:"item.created_by_user.full_name",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.createdByUser.fullName)+" ")]}},{key:"item.used_by_user_id",fn:function(t){var s=t.item;return[0!==s.usedByUserID?a("v-icon",{attrs:{color:"green",dark:""}},[e._v("mdi-check-bold")]):a("v-icon",{attrs:{color:"red",dark:""}},[e._v("mdi-close-circle")])]}},{key:"item.used_by_user.full_name",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.usedByUser.fullName)+" ")]}},{key:"item.delete",fn:function(t){var s=t.item;return[0!==s.usedByUserID?a("ConfirmationDialog",{attrs:{buttonText:"Remove",mainText:"Remove Access from ("+s.usedByUser.fullName+") ?",message:"The selected user won't be able to access this video anymore - Unless you accessed him again","video-code":"","deleted-item-name":s.usedByUser.fullName},on:{confirm:function(t){return e.removeAccess(t,s)}}}):e._e()]}}])})],1)],1)},bi=[],_i={name:"VideoCodes",components:{ConfirmationDialog:K},props:["video"],data:function(){return{numberOfCodesToGenerate:1,rules:{positiveNumber:function(e){return e>0&&e<=250||"Value must be between 0 and 250"}},headers:[{text:"Code",value:"value",sortable:!1},{text:"Generated By",value:"created_by_user.full_name"},{text:"Generated At",value:"created_at"},{text:"Used",value:"used_by_user_id",width:"10%"},{text:"Used By",value:"used_by_user.full_name",width:"20%"},{text:"Delete",value:"delete",sortable:!1}],codes:[],options:{sortBy:["used_by_user.full_name"],sortDesc:["true"]},loading:!1,totalCodes:0,search:"",accessedBy:"both",loadingPDF:!1,loadingGenerating:!1}},computed:{invalidGeneration:function(){return this.numberOfCodesToGenerate<=0||this.numberOfCodesToGenerate>250}},methods:{generateCodes:function(){var e=this;this.loadingGenerating=!0;var t=new FormData;t.append("videoID",this.video.ID),t.append("numberOfCodes",this.numberOfCodesToGenerate),Q({method:"POST",url:"/admin/videos/codes",data:t,responseType:"blob"}).then((function(e){var t=URL.createObjectURL(e.data);window.open(t,"_blank")})).finally((function(){e.loadingGenerating=!1}))},getCodes:function(){var e=this;this.loading=!0;var t=this.options,a=t.sortBy,s=t.sortDesc,n=t.page,i=t.itemsPerPage;Q({method:"GET",url:"/admin/videos/codes",params:{videoID:this.video.ID,page:n,itemsPerPage:i,sortBy:a,sortDesc:s,search:this.search,accessedBy:this.accessedBy}}).then((function(t){e.codes=t.data.codes,e.totalCodes=t.data.total})).finally((function(){e.loading=!1}))},removeAccess:function(e,t){var a=this;this.loading=!0;var s=new FormData;s.append("codeValue",t.value),s.append("typedValue",e.typedValue),Q({method:"DELETE",url:"/admin/videos/codes/code",data:s}).then((function(){a.getCodes()})).finally((function(){a.loading=!1}))},generateAccessPDF:function(){var e=this;this.loadingPDF=!0;var t=this.options,a=t.sortBy,s=t.sortDesc;Q({method:"GET",url:"/admin/videos/codes/access/pdf",responseType:"blob",params:{videoID:this.video.ID,page:0,itemsPerPage:0,sortBy:a,sortDesc:s,search:this.search,accessedBy:this.accessedBy}}).then((function(e){var t=URL.createObjectURL(e.data);window.open(t,"_blank")})).finally((function(){e.loadingPDF=!1}))}},watch:{options:{handler:function(){this.getCodes()},deep:!0}},mounted:function(){this.getCodes()},filters:{momentFormatDate:function(e){return He()(e).format("Do MMM YYYY, h a")}}},wi=_i,Di=Object(m["a"])(wi,gi,bi,!1,null,"720af602",null),yi=Di.exports;p()(Di,{VBtn:h["a"],VCard:L["a"],VCardSubtitle:U["b"],VCardTitle:U["d"],VCol:ve["a"],VDataTable:Xe["a"],VIcon:Y["a"],VRadio:aa["a"],VRadioGroup:sa["a"],VRow:pe["a"],VSpacer:G["a"],VTextField:H["a"]});var xi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",[a("v-card-title",[e._v(" Manual Access "),a("v-btn",{attrs:{loading:e.loading,icon:""}},[a("v-icon",{on:{click:e.getStudents}},[e._v("mdi-reload")])],1),a("v-spacer"),a("v-text-field",{attrs:{label:"Search by Username, Full Name, or Phone Number",clearable:"","prepend-icon":"mdi-magnify"},on:{input:e.search},model:{value:e.searchBy,callback:function(t){e.searchBy=t},expression:"searchBy"}})],1),a("v-card-subtitle",[a("v-col",[e._v("Video Title: "+e._s(e.video.title))])],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.students,options:e.options,"server-items-length":e.totalStudents,loading:e.loading,"footer-props":{"items-per-page-options":[10,15,20],"show-current-page":!0,"show-first-last-page":!0},"items-per-page":10,"show-select":"","item-key":"user.username","must-sort":""},on:{"update:options":function(t){e.options=t}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-card-actions",[a("v-btn",{attrs:{color:"primary",block:"",disabled:0===e.selected.length},on:{click:e.saveVideoAccess}},[e._v("Save")])],1)],1)],1)},ki=[],Vi={name:"VideoManualAccess",props:["video"],data:function(){return{searchBy:"",totalStudents:0,students:[],selected:[],loading:!1,options:{sortBy:["user.fullName"]},headers:[{text:"Full Name",value:"user.fullName",width:"40%"},{text:"Username",value:"user.username",width:"40%"},{text:"Phone Number",value:"user.phoneNumber",sortable:!1,width:"20%"}]}},mounted:function(){this.getStudents()},watch:{options:{handler:function(){this.getStudents()},deep:!0}},methods:{getStudents:function(){var e=this;this.loading=!0;for(var t=this.options,a=t.sortBy,s=t.sortDesc,n=t.page,i=t.itemsPerPage,o=[],r=0;r<a.length;r++){var l=a[r].split(".")[1];o.push(l.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())})))}Q({method:"GET",url:"/admin/videos/video/manual",params:{page:n,itemsPerPage:i,sortBy:o,sortDesc:s,pending:this.pending,searchByValue:this.searchBy,videoID:this.video.ID}}).then((function(t){e.students=t.data.students,e.totalStudents=t.data.total})).finally((function(){e.loading=!1}))},search:function(){this.options.page=1,this.getStudents()},saveVideoAccess:function(){var e=this;this.loading=!0;var t=new FormData;t.append("videoID",this.video.ID),t.append("addedTo[]",this.selected.map((function(e){return e.userID}))),Q({method:"POST",url:"/admin/videos/codes/manual",data:t}).then((function(){e.selected=[],e.getStudents()})).finally((function(){e.loading=!1}))}}},Ci=Vi,Ti=Object(m["a"])(Ci,xi,ki,!1,null,"d6ddd058",null),Si=Ti.exports;p()(Ti,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardTitle:U["d"],VCol:ve["a"],VDataTable:Xe["a"],VIcon:Y["a"],VSpacer:G["a"],VTextField:H["a"]});var zi={name:"VideoParts",props:["video"],components:{VideoManualAccess:Si,VideoCodes:yi,VideoContent:fi},data:function(){return{tab:0}}},qi=zi,Pi=Object(m["a"])(qi,Wn,Zn,!1,null,"32806372",null),Ii=Pi.exports;p()(Pi,{VTab:la["a"],VTabItem:ca["a"],VTabs:da["a"],VTabsItems:ua["a"]});var Ai=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-card",[a("v-card-title",[e._v("Parts")]),a("v-card-text",e._l(e.parts,(function(t,s){return a("div",{key:t.name},[a("v-list-item",{attrs:{"three-line":""}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"list-group-item"},[t.isVideo?a("div",[e._v(" Part#"+e._s(e.player.getVideoPartNumber(t.ID,e.parts))+": "+e._s(t.name)+" ")]):a("div",[e._v(" File: "+e._s(t.name)+" ")])]),void 0!==e.watches[s]&&t.isVideo?a("v-list-item-subtitle",[0===e.watches[s].userID&&0===e.watches[s].videoPartID?a("div",[e._v(" You haven't started watching this part yet ")]):new Date<new Date(e.watches[s].validTill)?a("div",[a("Timer",{attrs:{"end-time":e.watches[s].validTill,"time-up":e.timers[s]},on:{"update:timeUp":function(t){return e.$set(e.timers,s,t)},"update:time-up":function(t){return e.$set(e.timers,s,t)}}}),a("div",[e._v(e._s(e._f("momentFormatDate")(e.watches[s].validTill)))])],1):a("div",[e._v("You've watched this part")])]):e._e()],1),a("v-list-item-icon",[0===e.watches.length&&t.isVideo?a("v-progress-circular",{attrs:{indeterminate:""}}):void 0!==e.watches[s]&&t.isVideo&&(0===e.watches[s].userID&&0===e.watches[s].videoPartID||new Date<new Date(e.watches[s].validTill))?a("v-btn",{attrs:{icon:""}},[a("v-icon",{on:{click:function(a){return e.viewPart(t,s)}}},[e._v(" mdi-play ")])],1):e._e(),t.isVideo?e._e():a("v-btn",{attrs:{icon:"",loading:null===t.link}},[a("v-icon",{on:{click:function(a){return e.player.getPDF(t)}}},[e._v(" mdi-open-in-new ")])],1)],1)],1),a("v-divider")],1)})),0)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"8"}},[a("Player",{ref:"player",attrs:{video:e.video}})],1),a("v-dialog",{attrs:{width:"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v(" Start Selected Part ? ")]),a("v-card-subtitle",[e._v(e._s(e.partName))]),a("v-card-text",[e._v(" Are you sure you want to start this part ? You'll have "+e._s(e.video.studentHours)+" hours from now to finish it, after that you won't able to watch it ")]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.createWatch}},[e._v(" Yes Start it Now! "),a("v-icon",[e._v("mdi-play")])],1)],1)],1)],1),a("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.timeUpDialog,callback:function(t){e.timeUpDialog=t},expression:"timeUpDialog"}},[a("v-card",[a("v-card-text",[e._v(" The timespan available for this video has ended. "),a("br"),e._v(" The page will reload in 5 seconds ")])],1)],1)],1)},ji=[],Oi={name:"VideoParts",components:{Player:ii,Timer:qa},props:["video"],computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["isLoggedIn"])),{},{player:function(){return this.$refs.player}}),data:function(){return{parts:[],watches:[],timers:[],cachedTimers:[],partName:"",dialog:!1,timeUpDialog:!1,selectedIndex:-1}},methods:{getParts:function(){var e=this;Q({method:"GET",url:"/videos/parts",params:{videoHash:this.$route.params.videoHash}}).then((function(t){e.parts=t.data.parts;var a=[];e.parts.forEach((function(t){a.push(e.getUserWatchForPart(t.ID))})),Promise.all(a).then((function(t){t.forEach((function(t){e.watches.push(t.data.watch),e.timers.push(!1)})),e.cachedTimers=Object.assign([],e.timers)}))}))},viewPart:function(e,t){this.selectedIndex=t,this.isLoggedIn?0===this.watches[t].userID&&0===this.watches[t].videoPartID?this.dialog=!0:this.player.startPart(e,t):this.player.startStaticPart(e,t)},getUserWatchForPart:function(e){return Q({method:"GET",url:"/videos/watches/watch",params:{partID:e}})},createWatch:function(){var e=this,t=new FormData;t.append("videoPartID",this.parts[this.selectedIndex].ID),Q({method:"POST",url:"/videos/watches",data:t}).then((function(t){e.watches.splice(e.selectedIndex,1,t.data.watch),e.player.startPart(e.parts[e.selectedIndex],e.selectedIndex)})).finally((function(){e.dialog=!1}))}},watch:{timers:{handler:function(e){for(var t=0;t<e.length;t++)e[t]!==this.cachedTimers[t]&&(this.selectedIndex===t&&(this.timeUpDialog=!0,this.player.stop(),setTimeout((function(){window.location.reload()}),5e3)),this.cachedTimers[t]=e[t])},deep:!0}},filters:{momentFormatDate:function(e){return He()(e).format("dddd Do MMM YYYY, h:mm a")}},mounted:function(){this.isLoggedIn?this.getParts():(this.parts=this.video.parts,this.watches=[{validTill:(new Date).setHours((new Date).getHours()+1)}])}},Ei=Oi,Qi=Object(m["a"])(Ei,Ai,ji,!1,null,"29f0913c",null),Mi=Qi.exports;p()(Qi,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VDialog:F["a"],VDivider:R["a"],VIcon:Y["a"],VListItem:Me["a"],VListItemContent:$e["a"],VListItemIcon:Be["a"],VListItemSubtitle:$e["b"],VListItemTitle:$e["c"],VProgressCircular:si["a"],VRow:pe["a"],VSpacer:G["a"]});var $i=a("a762"),Ni={name:"Videos",components:{UserVideoParts:Mi,AppBar:Nt,AdminVideoParts:Ii},data:function(){return{video:null,mounted:!1}},computed:Object(o["a"])({},Object(c["b"])(["userData","isLoggedIn"])),created:function(){var e=this;if(this.isLoggedIn)Q({method:"GET",url:"/videos/video",params:{videoHash:this.$route.params.videoHash}}).then((function(t){e.video=t.data.video,e.mounted=!0}));else{var t=this.$route.params.videoHash;this.video="CALCINDYNAMICS"===t?$i[0]:"DIFFTRCKS"===t?$i[1]:$i[2],this.mounted=!0}}},Bi=Ni,Li=Object(m["a"])(Bi,Gn,Hn,!1,null,"894cc6ea",null),Ui=Li.exports;p()(Li,{VApp:D["a"],VContainer:Rt["a"],VMain:Yt["a"]});var Fi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Videos"}}),a("v-main",[a("v-container",[e.userData.admin?a("v-row",[a("div",[e._v("Please note that the video will be created with the chosen settings (Year, Selected Day, and Title)")])]):e._e(),a("ValidationObserver",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.invalid;return[a("form",{on:{submit:function(t){return t.preventDefault(),e.createVideo(t)}}},[a("v-row",[e.userData.admin?a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-row",[a("v-col",[a("v-date-picker",{attrs:{"full-width":"","first-day-of-week":"5","picker-date":e.pickedMonth},on:{"update:pickerDate":function(t){e.pickedMonth=t},"update:picker-date":function(t){e.pickedMonth=t}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-row",[a("v-text-field",{attrs:{label:"Title","prepend-icon":"mdi-format-text","error-messages":s,counter:""},model:{value:e.newVideoTitle,callback:function(t){e.newVideoTitle="string"===typeof t?t.trim():t},expression:"newVideoTitle"}})],1)]}}],null,!0)}),a("ValidationProvider",{attrs:{rules:"required|numeric|min_value:1"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-row",[a("v-text-field",{attrs:{label:"Hours to Watch / Part","error-messages":s,"prepend-icon":"mdi-timer-outline"},model:{value:e.newVideoAvailableTime,callback:function(t){e.newVideoAvailableTime=e._n(t)},expression:"newVideoAvailableTime"}})],1)]}}],null,!0)}),a("v-row",[a("v-btn",{attrs:{color:"primary",block:"",loading:e.createLoading,disabled:s},on:{click:e.createVideo}},[e._v("Create Video ")])],1)],1):a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-date-picker",{attrs:{type:"month"},model:{value:e.pickedMonth,callback:function(t){e.pickedMonth=t},expression:"pickedMonth"}})],1),a("v-col",[e.userData.admin?a("v-row",e._l(e.videos,(function(t,s){return a("AdminVideoCard",{key:t.ID,attrs:{index:s+1,video:t},on:{videoUpdated:e.getVideos,videoDeleted:e.getVideos}})})),1):a("v-row",e._l(e.videos,(function(e,t){return a("UserVideoCard",{key:e.ID,attrs:{index:t+1,video:e}})})),1)],1)],1)],1)]}}])})],1)],1),a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Please stand by "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},Ri=[],Yi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-card",{attrs:{shaped:"",elevation:"6",id:"card-"+e.video.ID}},[a("v-card-title",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"card-title-div"},[e._v(" "+e._s(e.video.title)+" ")])]),a("v-card-subtitle",[e._v("Video #"+e._s(e.index)+" "),e.saved?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"green",dark:""}},"v-icon",n,!1),s),[e._v("mdi-check-bold")])]}}],null,!1,2160898774)},[a("span",[e._v("Video data is saved")])]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"red",dark:""},on:{click:function(t){e.show=!0}}},"v-icon",n,!1),s),[e._v("mdi-close-circle")])]}}])},[a("span",[e._v("Video data is not saved!")])])],1),a("v-card-text",[a("p",[e._v("Available From: "+e._s(e._f("moment")(e.video.availableFrom)))])]),a("v-card-actions",[a("v-btn",{attrs:{outlined:"",to:{name:"ViewVideo",params:{videoHash:e.video.hash}}}},[e._v("Parts")]),a("v-spacer"),a("ConfirmationDialog",{attrs:{buttonText:"Delete",mainText:"Delete This Item?",message:"You won't be able to restore the deleted video or its parts",video:"","deleted-item-name":e.video.title},on:{confirm:e.deleteVideo}}),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.show=!e.show}}},[a("v-icon",[e._v(e._s(e.show?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1),a("v-expand-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[a("v-divider"),a("v-card-text",[a("v-text-field",{attrs:{label:"Title","prepend-icon":"mdi-format-text",counter:""},model:{value:e.title,callback:function(t){e.title="string"===typeof t?t.trim():t},expression:"title"}}),a("v-text-field",{attrs:{label:"Hours to Watch / Part","prepend-icon":"mdi-timer-outline",counter:""},model:{value:e.studentHours,callback:function(t){e.studentHours=e._n(t)},expression:"studentHours"}}),a("v-date-picker",{attrs:{"full-width":"","first-day-of-week":"5"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("v-btn",{attrs:{block:"",rounded:"",color:"primary",loading:e.loading,disabled:0===e.title.length},on:{click:e.updateVideo}},[e._v(" Save ")])],1)],1)])],1),a("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Please stand by "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},Gi=[],Hi={name:"VideoCard",components:{ConfirmationDialog:K},props:["index","video"],computed:{date:{get:function(){return He()(this.video.availableFrom).format("YYYY-MM-DD")},set:function(e){this.video.availableFrom=e}},title:{get:function(){return this.video.title},set:function(e){this.video.title=e,this.saved=!1}},studentHours:{get:function(){return this.video.studentHours},set:function(e){this.video.studentHours=e,this.saved=!1}}},data:function(){return{show:!1,saved:!0,loading:!1,dialog:!1}},methods:{updateVideo:function(){var e=this;this.loading=!0;var t=new FormData;t.append("id",this.video.ID),t.append("title",this.video.title),t.append("studentTime",this.video.studentHours),t.append("availableFrom",new Date(this.video.availableFrom).getTime()),Q({method:"PUT",url:"/admin/videos",data:t}).then((function(){e.saved=!0,e.show=!1,e.$emit("videoUpdated");var t=e.video.ID;document.getElementById("card-".concat(t)).classList.add("new-update"),setTimeout((function(){document.getElementById("card-".concat(t)).classList.remove("new-update")}),5e3)})).finally((function(){e.loading=!1}))},deleteVideo:function(e){var t=this;this.dialog=!0;var a=new FormData;a.append("id",this.video.ID),a.append("typedTitle",e.typedValue),Q({method:"DELETE",url:"/admin/videos",data:a}).then((function(){t.$emit("videoDeleted")})).finally((function(){t.dialog=!1}))}},filters:{moment:function(e){return He()(e).format("dddd Do MMM YYYY, h:mm a")}}},Wi=Hi,Zi=(a("1384"),a("0789")),Ki=Object(m["a"])(Wi,Yi,Gi,!1,null,"6824a48c",null),Ji=Ki.exports;p()(Ki,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VDatePicker:et["a"],VDialog:F["a"],VDivider:R["a"],VExpandTransition:Zi["a"],VIcon:Y["a"],VProgressLinear:at["a"],VSpacer:G["a"],VTextField:H["a"],VTooltip:W["a"]});var Xi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-card",{attrs:{shaped:"",elevation:"6",id:"card-"+e.video.ID}},[a("v-card-title",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"card-title-div"},[e._v(" "+e._s(e.video.title)+" ")])]),a("v-card-subtitle",[e._v("Video #"+e._s(e.index)+" "),e.pendingAccess?a("v-progress-circular",{attrs:{indeterminate:""}}):e.access?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"green",dark:""}},"v-icon",n,!1),s),[e._v("mdi-check-bold")])]}}])},[a("span",[e._v("You have access to view this video when it's available")])]):e.typingCode?a("div",[a("v-text-field",{attrs:{label:"Code","single-line":"","prepend-icon":"mdi-barcode","append-icon":"mdi-check",type:"text"},on:{"click:append":e.checkCode},model:{value:e.codeToUse,callback:function(t){e.codeToUse=t},expression:"codeToUse"}})],1):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"red",dark:""},on:{click:function(t){e.typingCode=!0}}},"v-icon",n,!1),s),[e._v("mdi-close-circle")])]}}])},[a("span",[e._v("Click to use code")])])],1),a("v-card-text",[a("p",[e._v("Available From: "+e._s(e._f("moment")(e.video.availableFrom)))])]),e.isAvailableToWatch?a("v-card-actions",[a("v-btn",{attrs:{outlined:"",to:{name:"ViewVideo",params:{videoHash:e.video.hash}}}},[e._v("Parts")])],1):e._e()],1)],1)},eo=[],to={name:"VideoCard",props:["index","video"],data:function(){return{access:!1,pendingAccess:!1,codeToUse:"",typingCode:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["isLoggedIn"])),{},{isAvailableToWatch:function(){return new Date>=new Date(this.video.availableFrom)&&this.access}}),methods:{getVideoPermission:function(){var e=this;this.pendingAccess=!0,Q({method:"GET",url:"/videos/codes/code",params:{videoID:this.video.ID}}).then((function(t){e.access=t.data.status})).finally((function(){e.pendingAccess=!1}))},checkCode:function(){var e=this;this.typingCode=!1,this.pendingAccess=!0;var t=new FormData;t.append("code",this.codeToUse),t.append("videoID",this.video.ID),Q({method:"PUT",url:"/videos/codes/code",data:t}).then((function(){e.access=!0})).catch((function(){e.typingCode=!0})).finally((function(){e.pendingAccess=!1}))}},mounted:function(){this.isLoggedIn?this.getVideoPermission():this.access=!0},filters:{moment:function(e){return He()(e).format("dddd Do MMM YYYY, h:mm a")},momentDifference:function(e){var t=He()();e=He()(e);var a=t.diff(e,"minutes");return a>=0}}},ao=to,so=(a("e31b"),Object(m["a"])(ao,Xi,eo,!1,null,"352f53b6",null)),no=so.exports;p()(so,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VIcon:Y["a"],VProgressCircular:si["a"],VTextField:H["a"],VTooltip:W["a"]});var io={name:"Videos",components:{AdminVideoCard:Ji,UserVideoCard:no,AppBar:Nt},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["userData","classes","isLoggedIn"])),{},{selectedClass:function(){return this.classes.values[this.classes.selectedClass].classHash}}),data:function(){return{date:(new Date).toISOString().substr(0,10),menu:!1,newVideoTitle:"",newVideoAvailableTime:3,pickedMonth:(new Date).toISOString().substr(0,7),createLoading:!1,videos:[],dialog:!1}},methods:{getVideos:function(){var e=this;this.isLoggedIn?(this.dialog=!0,Q({method:"GET",url:"/videos",params:{date:new Date(this.pickedMonth).getTime()}}).then((function(t){e.videos=t.data.videos})).finally((function(){e.dialog=!1}))):this.videos=$i},createVideo:function(){var e=this;this.createLoading=!0;var t=new FormData;t.append("selectedClass",this.selectedClass),t.append("availableFrom",new Date(this.date).getTime()),t.append("title",this.newVideoTitle),t.append("studentTime",this.newVideoAvailableTime),Q({method:"POST",url:"/admin/videos",data:t}).then((function(t){e.$router.push({name:"ViewVideo",params:{videoHash:t.data.video.hash}})})).finally((function(){e.createLoading=!1}))}},mounted:function(){this.getVideos()},watch:{pickedMonth:function(){this.getVideos()},classes:{handler:function(){this.getVideos()},deep:!0}}},oo=io,ro=Object(m["a"])(oo,Fi,Ri,!1,null,"674cc987",null),lo=ro.exports;p()(ro,{VApp:D["a"],VBtn:h["a"],VCard:L["a"],VCardText:U["c"],VCol:ve["a"],VContainer:Rt["a"],VDatePicker:et["a"],VDialog:F["a"],VMain:Yt["a"],VProgressLinear:at["a"],VRow:pe["a"],VTextField:H["a"]});var co=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Enrolled Classes"}}),a("v-main",[a("v-container",[a("v-card",[a("v-card-text",[e.loading?a("v-row",{attrs:{justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"70"}})],1):e.loading?e._e():a("v-row",e._l(e.userClasses,(function(e,t){return a("v-col",{key:e.hash,attrs:{cols:"12",sm:"6",md:"4"}},[a("ClassCard",{attrs:{"student-class":e,index:t}})],1)})),1),e.pendingClasses.length>0?a("v-row",e._l(e.pendingClasses,(function(e,t){return a("v-col",{key:e.hash,attrs:{cols:"12",sm:"6",md:"4"}},[a("ClassCard",{attrs:{"student-class":e,index:t}})],1)})),1):e._e()],1),0===e.userClasses.length&&0===e.pendingClasses.length?a("v-card-text",[e._v(" You're not enrolled in any classes. "),a("v-btn",{attrs:{text:"",to:{name:"AllClasses"}}},[e._v("ENROLL NOW!")])],1):e._e()],1),a("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{fixed:"",dark:"",fab:"",right:"",bottom:"",color:"primary",to:{name:"AllClasses"}}},s),[a("v-icon",[e._v("mdi-plus")])],1)]}}])},[a("span",[e._v("Enroll to New Class")])]),a("div",{staticStyle:{height:"10px"}})],1)],1)],1)},uo=[],mo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[e.studentClass?a("v-card-title",[e._v(" "+e._s(e.studentClass.class.organization.subject)+" "),a("v-spacer"),e._v(" "+e._s(e.studentClass.class.name)+" ")],1):e._e(),e.availableClass?a("v-card-title",[e._v(" "+e._s(e.availableClass.organization.subject)+" "),a("v-spacer"),e._v(" "+e._s(e.availableClass.name)+" ")],1):e._e(),e.studentClass?a("v-card-subtitle",[e._v("Taught By: "+e._s(e.studentClass.class.organization.teacherName))]):e._e(),e.availableClass?a("v-card-subtitle",[e._v("Taught By: "+e._s(e.availableClass.organization.teacherName))]):e._e(),e.studentClass?a("v-card-actions",[e.studentClass.activated?a("v-btn",{attrs:{color:"primary"},on:{click:e.changeSelectedClass}},[e._v("Select")]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"red",dark:""}},"v-icon",n,!1),s),[e._v("mdi-close-circle")])]}}],null,!1,20967865)},[a("span",[e._v("Waiting for activation")])]),a("v-spacer")],1):e.availableClass?a("v-card-actions",[e.selected?e.selected?a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-icon",e._g(e._b({attrs:{color:"green",dark:""}},"v-icon",n,!1),s),[e._v("mdi-check")])]}}])},[a("span",[e._v("You've enrolled successfully! - wait for admin verification to access the class -")])]):e._e():a("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:function(t){return e.enrollToClass(e.availableClass.hash)}}},[e._v("Enroll ")])],1):e._e()],1)},vo=[],po={name:"ClassCard",props:["studentClass","index","availableClass"],computed:Object(o["a"])({},Object(c["b"])(["userData"])),data:function(){return{loading:!1,selected:!1}},methods:{changeSelectedClass:function(){this.$store.dispatch("setUserClass",this.index),this.$router.push({name:"Announcements"})},enrollToClass:function(e){var t=this;this.loading=!0;var a=new FormData;a.append("newSelectedClass",e),Q({method:"POST",url:"/classes/enroll",data:a}).then((function(){t.selected=!0})).finally((function(){t.loading=!1}))}}},ho=po,fo=Object(m["a"])(ho,mo,vo,!1,null,"67937f35",null),go=fo.exports;p()(fo,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardSubtitle:U["b"],VCardTitle:U["d"],VIcon:Y["a"],VSpacer:G["a"],VTooltip:W["a"]});var bo={name:"EnrolledClasses",data:function(){return{userClasses:[],pendingClasses:[],totalClasses:0,selection:0,loading:!1}},components:{ClassCard:go,AppBar:Nt},methods:{getEnrolledClasses:function(){var e=this;this.loading=!0,Q({method:"GET",url:"/classes"}).then((function(t){e.userClasses=[],e.pendingClasses=[],t.data.classes.forEach((function(t){t.activated?e.userClasses.push(t):e.pendingClasses.push(t)})),e.$store.dispatch("setUserClasses",e.userClasses),e.userClasses.length>0&&e.$store.dispatch("setUserClass",0)})).finally((function(){e.loading=!1}))}},mounted:function(){this.getEnrolledClasses()}},_o=bo,wo=Object(m["a"])(_o,co,uo,!1,null,"5d9effc6",null),Do=wo.exports;p()(wo,{VApp:D["a"],VBtn:h["a"],VCard:L["a"],VCardText:U["c"],VCol:ve["a"],VContainer:Rt["a"],VIcon:Y["a"],VMain:Yt["a"],VProgressCircular:si["a"],VRow:pe["a"],VTooltip:W["a"]});var yo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"All Classes"}}),a("v-main",[a("v-container",[a("v-card",[a("v-card-title",[a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{label:"Class Name"},model:{value:e.searchValues.className,callback:function(t){e.$set(e.searchValues,"className",t)},expression:"searchValues.className"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{label:"Subject"},model:{value:e.searchValues.subject,callback:function(t){e.$set(e.searchValues,"subject",t)},expression:"searchValues.subject"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-text-field",{attrs:{label:"Teacher Name"},model:{value:e.searchValues.teacherName,callback:function(t){e.$set(e.searchValues,"teacherName",t)},expression:"searchValues.teacherName"}})],1),a("v-col",{attrs:{cols:"12",sm:"3"}},[a("v-select",{attrs:{label:"Year",items:e.years,"item-text":"text","item-value":"value"},model:{value:e.searchValues.selectedYear,callback:function(t){e.$set(e.searchValues,"selectedYear",t)},expression:"searchValues.selectedYear"}})],1)],1),a("v-card-text",[e.loading?a("v-row",{attrs:{justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"70"}})],1):a("v-row",e._l(e.availableClasses,(function(e,t){return a("v-col",{key:e.hash,attrs:{cols:"12",sm:"6",md:"4"}},[a("ClassCard",{attrs:{"available-class":e,index:t}})],1)})),1)],1)],1),a("BottomPagination",{attrs:{length:e.totalPages,page:e.options.page},on:{"update:page":function(t){return e.$set(e.options,"page",t)}}})],1)],1)],1)},xo=[],ko={name:"AllClasses",components:{BottomPagination:xe,ClassCard:go,AppBar:Nt},data:function(){return{availableClasses:[],totalPages:0,loading:!1,searchValues:{className:"",subject:"",teacherName:"",selectedYear:1},years:[{text:"First Year",value:1},{text:"Second Year",value:2},{text:"Third Year",value:3}],options:{sortBy:[],sortDesc:[],page:1,itemsPerPage:5}}},watch:{searchValues:{handler:function(){this.getAllClasses()},deep:!0}},methods:{getAllClasses:function(){var e=this;this.loading=!0,Q({method:"GET",url:"/classes/all",params:{sortBy:this.options.sortBy,sortDesc:this.options.sortDesc,page:this.options.page,itemsPerPage:this.options.itemsPerPage,subject:this.searchValues.subject,teacherName:this.searchValues.teacherName,className:this.searchValues.className,year:this.searchValues.selectedYear}}).then((function(t){e.availableClasses=t.data.classes;var a=t.data.total;e.totalPages=Math.ceil(a/e.options.itemsPerPage)})).finally((function(){e.loading=!1}))}},mounted:function(){this.getAllClasses()}},Vo=ko,Co=Object(m["a"])(Vo,yo,xo,!1,null,"dfa94b04",null),To=Co.exports;p()(Co,{VApp:D["a"],VCard:L["a"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VContainer:Rt["a"],VMain:Yt["a"],VProgressCircular:si["a"],VRow:pe["a"],VSelect:jn["a"],VTextField:H["a"]});var So=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("AppBar",{attrs:{"page-name":"Students Access"}}),a("v-main",[a("v-container",[a("StudentsTable")],1)],1)],1)},zo=[],qo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v(" Students "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search by Username, Full Name, or Phone Number","single-line":"",clearable:""},on:{input:e.search},model:{value:e.searchBy,callback:function(t){e.searchBy=t},expression:"searchBy"}})],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"3"}},[a("v-date-picker",{attrs:{"full-width":"","allowed-dates":e.allowedDates},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}}),a("v-btn",{attrs:{block:"",rounded:"",color:"primary"},on:{click:function(t){e.confirmationTable=!0}}},[e._v("Save")])],1),a("v-col",{attrs:{cols:"12",md:"9"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.students,options:e.options,"server-items-length":e.totalStudents,loading:e.loading,"footer-props":{"items-per-page-options":[10,15,20],"show-current-page":!0,"show-first-last-page":!0},"items-per-page":10,"show-select":"","item-key":"user.username"},on:{"update:options":function(t){e.options=t},"item-selected":e.itemSelected,"toggle-select-all":e.toggleSelectAll},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1),a("ConfirmationTable",{attrs:{dialog:e.confirmationTable,"added-to":e.accessChanges.addedTo,"removed-from":e.accessChanges.removedFrom,date:e.date},on:{"update:dialog":function(t){e.confirmationTable=t},saved:e.savedSuccessfully}})],1)},Po=[],Io=(a("4de4"),a("6062"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{persistent:""},on:{"click:outside":e.closeDialog},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2"},[e._v(" Changes ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",[a("v-card-title",[e._v("Students to Add")]),a("v-data-table",{attrs:{headers:e.headers,items:e.addedTo,"must-sort":"","sort-by":"user.fullName","footer-props":{"items-per-page-options":[10,-1]}}})],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",[a("v-card-title",[e._v("Students to Remove")]),a("v-data-table",{attrs:{headers:e.headers,items:e.removedFrom,"must-sort":"","sort-by":"user.fullName","footer-props":{"items-per-page-options":[10,-1]}}})],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:"",disabled:e.loading},on:{click:e.closeDialog}},[e._v(" Cancel ")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",loading:e.loading},on:{click:e.pushPayments}},[e._v(" Confirm ")])],1)],1)],1)],1)}),Ao=[],jo={name:"ConfirmationTable",props:["dialog","addedTo","removedFrom","date"],computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["userData","classes"])),{},{selectedClass:function(){return this.classes.values[this.classes.selectedClass].classHash}}),data:function(){return{headers:[{text:"Full Name",value:"user.fullName"}],loading:!1}},methods:{closeDialog:function(){this.loading||this.$emit("update:dialog",!1)},pushPayments:function(){var e=this;this.loading=!0;var t=new FormData;t.append("selectedClass",this.selectedClass),t.append("startDate",new Date(this.date).getTime()),t.append("addedTo[]",this.addedTo.map((function(e){return e.userID}))),t.append("removedFrom[]",this.removedFrom.map((function(e){return e.userID}))),Q({method:"POST",url:"/admin/payments/week",data:t}).then((function(){e.$emit("saved"),e.loading=!1,e.closeDialog()})).catch((function(){e.loading=!1}))}}},Oo=jo,Eo=Object(m["a"])(Oo,Io,Ao,!1,null,"e424066c",null),Qo=Eo.exports;p()(Eo,{VBtn:h["a"],VCard:L["a"],VCardActions:U["a"],VCardText:U["c"],VCardTitle:U["d"],VCol:ve["a"],VDataTable:Xe["a"],VDialog:F["a"],VDivider:R["a"],VRow:pe["a"],VSpacer:G["a"]});var Mo={name:"StudentsTable",components:{ConfirmationTable:Qo},data:function(){return{searchBy:"",totalStudents:0,students:[],selected:[],loading:!1,options:{},headers:[{text:"Full Name",value:"user.fullName"},{text:"Username",value:"user.username"},{text:"Phone Number",value:"user.phoneNumber",sortable:!1}],date:"",accessChanges:{addedTo:[],removedFrom:[]},retrievedAccessUsersIDs:new Set,confirmationTable:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["classes"])),{},{selectedClass:function(){return this.classes.values[this.classes.selectedClass].classHash}}),methods:{search:function(){this.options.page=1,this.getStudents()},savedSuccessfully:function(){this.accessChanges.addedTo=[],this.accessChanges.removedFrom=[]},getStudents:function(){var e=this;this.loading=!0;for(var t=this.options,a=t.sortBy,s=t.sortDesc,n=t.page,i=t.itemsPerPage,o=[],r=0;r<a.length;r++){var l=a[r].split(".")[1];o.push(l.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())})))}Q({method:"GET",url:"/admin/classes/students",params:{page:n,itemsPerPage:i,sortBy:o,sortDesc:s,pending:this.pending,searchByValue:this.searchBy,studentsOnly:!0}}).then((function(t){e.students=t.data.students,e.totalStudents=t.data.totalStudents,e.getPayments()})).finally((function(){e.loading=!1}))},getPayments:function(){var e=this;this.loading=!0;var t=this.students.filter((function(t){if(!e.retrievedAccessUsersIDs.has(t.userID))return e.retrievedAccessUsersIDs.add(t.userID),t})).map((function(e){return e.userID}));t.length>0&&Q({method:"GET",url:"/admin/payments/week",params:{date:new Date(this.date).getTime(),usersIDs:t}}).then((function(t){var a=t.data.payments;a.forEach((function(t){e.students.forEach((function(a){a.userID===t.userID&&e.selected.push(a)}))}))})).finally((function(){e.loading=!1}))},itemSelected:function(e){if(e.value){var t=this.isUserInArray(this.accessChanges.removedFrom,e.item.userID),a=this.isUserInArray(this.selected,e.item.userID);t.found?this.accessChanges.removedFrom.splice(t.index,1):a.found||this.accessChanges.addedTo.push(e.item)}else{var s=this.isUserInArray(this.accessChanges.addedTo,e.item.userID),n=this.isUserInArray(this.selected,e.item.userID);s.found?this.accessChanges.addedTo.splice(s.index,1):n.found&&this.accessChanges.removedFrom.push(e.item)}},isUserInArray:function(e,t){var a=!1,s=-1;return e.forEach((function(e,n){e.userID===t&&(a=!0,s=n)})),{found:a,index:s}},toggleSelectAll:function(e){var t=this;e.items.forEach((function(a){t.itemSelected({item:a,value:e.value})}))},allowedDates:function(e){return 5===new Date(e).getDay()}},mounted:function(){this.getStudents();var e=new Date;while(5!==e.getDay())e.setDate(e.getDate()-1);this.date=e.toISOString().substr(0,10)},watch:{options:{handler:function(){this.getStudents()},deep:!0},selectedClass:function(){this.options.page=1,this.selected=[],this.accessChanges.addedTo=[],this.accessChanges.removedFrom=[],this.retrievedAccessUsersIDs=new Set,this.getStudents()},date:function(){this.options.page=1,this.selected=[],this.accessChanges.addedTo=[],this.accessChanges.removedFrom=[],this.retrievedAccessUsersIDs=new Set,this.getPayments()}}},$o=Mo,No=Object(m["a"])($o,qo,Po,!1,null,"9f533f38",null),Bo=No.exports;p()(No,{VBtn:h["a"],VCard:L["a"],VCardTitle:U["d"],VCol:ve["a"],VDataTable:Xe["a"],VDatePicker:et["a"],VRow:pe["a"],VSpacer:G["a"],VTextField:H["a"]});var Lo={name:"Access",components:{StudentsTable:Bo,AppBar:Nt}},Uo=Lo,Fo=Object(m["a"])(Uo,So,zo,!1,null,"8d7c7118",null),Ro=Fo.exports;p()(Fo,{VApp:D["a"],VContainer:Rt["a"],VMain:Yt["a"]}),s["a"].use(C["a"]);var Yo="Remote Tutor",Go=[{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/announcements",alias:"/",name:"Announcements",component:Wt,meta:{title:"Announcements"}},{path:"/students",name:"Students",component:va,meta:{title:"Students"}},{path:"/access",name:"Access",component:Ro,meta:{title:"Students Access"}},{path:"/quizzes",name:"Quizzes",component:$a,meta:{title:"Quizzes"}},{path:"/quizzes/questions/:quizHash",name:"QuizQuestions",component:ps,meta:{title:"New Question"}},{path:"/quizzes/:action/:quizHash",name:"SolveQuiz",component:Ns,meta:{title:"Quiz"}},{path:"/grades",name:"Grades",component:Xs,meta:{title:"Grades"}},{path:"/assignments",name:"Assignments",component:_n,meta:{title:"Assignments"}},{path:"/assignment/:assignmentHash",name:"Assignment",component:Yn,meta:{title:"Assignment"}},{path:"/videos",name:"Videos",component:lo,meta:{title:"Videos"}},{path:"/video/:videoHash",name:"ViewVideo",component:Ui,meta:{title:"Video"}},{path:"/password",name:"ResetPassword",component:on,meta:{title:"Reset Password"}},{path:"/classes",name:"Classes",component:Do,meta:{title:"Enrolled Classes"}},{path:"/classes/all",name:"AllClasses",component:To,meta:{title:"Available Classes"}}],Ho=new C["a"]({mode:"history",base:"/",routes:Go});Ho.afterEach((function(e){s["a"].nextTick((function(){document.title=e.meta.title||Yo}))}));var Wo=Ho,Zo=a("7bb1"),Ko=a("859b"),Jo=a("50d1"),Xo=a.n(Jo),er=(a("d355"),a("310e")),tr=a.n(er),ar=a("afa7"),sr=(a("4d63"),a("4c93"));Object(Zo["c"])("required",Object(o["a"])(Object(o["a"])({},sr["i"]),{},{lazy:!0,message:"This field is required"})),Object(Zo["c"])("email",Object(o["a"])({},sr["b"])),Object(Zo["c"])("confirmed",Object(o["a"])(Object(o["a"])({},sr["a"]),{},{message:"These fields must match"})),Object(Zo["c"])("excluded",Object(o["a"])(Object(o["a"])({},sr["c"]),{},{message:"You must select a valid option"})),Object(Zo["c"])("numeric",Object(o["a"])(Object(o["a"])({},sr["h"]),{},{message:"Numbers Only"})),Object(Zo["c"])("max",Object(o["a"])(Object(o["a"])({},sr["e"]),{},{params:["length"],message:"Maximum is {length} characters"})),Object(Zo["c"])("min",Object(o["a"])(Object(o["a"])({},sr["f"]),{},{params:["length"],message:"Minimum is {length} characters"})),Object(Zo["c"])("min_value",Object(o["a"])(Object(o["a"])({},sr["g"]),{},{message:"Minimum is {min} or more"})),Object(Zo["c"])("image",Object(o["a"])(Object(o["a"])({},sr["d"]),{},{message:"You must upload an image"})),Object(Zo["c"])("required_if",Object(o["a"])(Object(o["a"])({},sr["j"]),{},{validate:function(e,t){var a=t.target,s=void 0===e||0===e.length,n=void 0===a||0===a.length;return!(s&&n)},message:"You must upload an image or enter text"})),Object(Zo["c"])("username",{validate:function(e){var t=new RegExp("^(?=.{5,20})");return t.test(e)?(t=new RegExp("(\\s)"),t.test(e)?"Username cannot contain spaces":(t=new RegExp("^[a-zA-Z0-9._]+$"),t.test(e)?(t=new RegExp("^(?![_.0-9])"),t.test(e)?(t=new RegExp("^(?!.*[_.]{2})"),t.test(e)?(t=new RegExp("(?<![_.])$"),!!t.test(e)||"You cannot have a special character at the end"):"You cannot have 2 consecutive special characters"):"Username must start with a letter"):"The allowed characters are a-z, A-Z, 0-9, dot(.), and underscore(_)")):"Username length must be 5 to 20 characters long"}}),s["a"].component("ValidationObserver",Zo["a"]),s["a"].component("ValidationProvider",Zo["b"]),s["a"].component("Datetime",Ko["Datetime"]),s["a"].use(Xo.a),s["a"].component("draggable",tr.a),s["a"].use(ar["a"],{emit:["error","play"]}),s["a"].config.productionTip=!1,new s["a"]({vuetify:V,router:Wo,store:j,render:function(e){return e(x)}}).$mount("#app")},"63d0":function(e,t,a){"use strict";var s=a("8141"),n=a.n(s);n.a},8141:function(e,t,a){},8856:function(e,t,a){},"9dcf":function(e){e.exports=JSON.parse('[{"question":{"totalMark":1,"text":"Solve the following","imagePath":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/quizzes/Q1.png"},"correctAnswer":4,"choices":[{"ID":1,"text":"A"},{"ID":2,"text":"B"},{"ID":3,"text":"C"},{"ID":4,"text":"D"}]},{"question":{"totalMark":1,"text":"Solve the following","imagePath":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/quizzes/Q2.png"},"correctAnswer":4,"choices":[{"ID":1,"text":"A"},{"ID":2,"text":"B"},{"ID":3,"text":"C"},{"ID":4,"text":"D"}]},{"question":{"totalMark":1,"text":"Solve the following","imagePath":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/quizzes/Q3.png"},"correctAnswer":2,"choices":[{"ID":1,"text":"A"},{"ID":2,"text":"B"},{"ID":3,"text":"C"},{"ID":4,"text":"D"}]},{"question":{"totalMark":1,"text":"Solve the following","imagePath":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/quizzes/Q4.png"},"correctAnswer":1,"choices":[{"ID":1,"text":"A"},{"ID":2,"text":"B"},{"ID":3,"text":"C"},{"ID":4,"text":"D"}]},{"question":{"totalMark":1,"text":"Solve the following","imagePath":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/quizzes/Q5.png"},"correctAnswer":1,"choices":[{"ID":1,"text":"A"},{"ID":2,"text":"B"},{"ID":3,"text":"C"},{"ID":4,"text":"D"},{"ID":5,"text":"E"}]}]')},a097:function(e,t,a){e.exports=a.p+"img/video-error.8926d002.png"},a762:function(e){e.exports=JSON.parse('[{"ID":1,"title":"Calculus in Dynamics","availableFrom":"2021-06-01T00:00:00.000Z","hash":"CALCINDYNAMICS","parts":[{"isVideo":true,"name":"Use calculus to solve dynamics","link":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/videos/CalcInDynamics.mp4"}]},{"ID":2,"title":"Differentiation Tricks","availableFrom":"2021-06-02T00:00:00.000Z","hash":"DIFFTRCKS","parts":[{"isVideo":true,"name":"Differentiation trick","link":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/videos/DifferentiationTrick.mp4"}]},{"ID":3,"title":"Omega Power Using Calculator","availableFrom":"2021-06-03T00:00:00.000Z","hash":"OMEGAPOWER","parts":[{"isVideo":true,"name":"get omega power using calculator","link":"https://d18c3p5zqeurpo.cloudfront.net/demo-data/videos/OmegaUsingCalc.mp4"}]}]')},b9ad:function(e){e.exports=JSON.parse('{"current":[{"title":"Test Quiz","studentTime":120,"timeAvailable":true,"started":true,"access":true,"consumedMinutes":45,"daysMargin":2,"hash":"CURRENT"}],"upcoming":[{"title":"Upcoming Quiz","studentTime":90,"access":true,"startDaysMargin":1,"endDaysMargin":3},{"title":"Inaccessible","studentTime":30,"access":false,"startDaysMargin":3,"endDaysMargin":4}],"past":[{"title":"Past Quiz","studentTime":180,"access":true,"startDaysMargin":5,"endDaysMargin":3,"hash":"PAST","totalMark":5}]}')},beb3:function(e,t,a){},c0bc:function(e,t,a){},c0dc:function(e,t,a){"use strict";var s=a("3a06"),n=a.n(s);n.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.19ff147e.png"},e044:function(e){e.exports=JSON.parse('[{"title":"YOU\'RE NOT LOGGED IN","CreatedAt":"2021-05-20","topic":"WARNING","content":"You must login to be able to use the full functionality of the website, all of this data is dummy and not real.\\nIt\'s just for demonstration purposes"},{"title":"Hello Students","CreatedAt":"2021-05-20","topic":"Welcome","content":"Welcome to a wonderful year full of learning! Enjoy each day and know that you are surrounded by support. Try your best in everything you do, stay positive, have fun, and keep smiling! Youll do great!"},{"title":"Hello Students","CreatedAt":"2021-05-20","topic":"Welcome","content":"Welcome to a wonderful year full of learning! Enjoy each day and know that you are surrounded by support. Try your best in everything you do, stay positive, have fun, and keep smiling! Youll do great!"},{"title":"Hello Students","CreatedAt":"2021-05-20","topic":"Welcome","content":"Welcome to a wonderful year full of learning! Enjoy each day and know that you are surrounded by support. Try your best in everything you do, stay positive, have fun, and keep smiling! Youll do great!"}]')},e31b:function(e,t,a){"use strict";var s=a("1387"),n=a.n(s);n.a},e34b:function(e,t,a){},e533:function(e,t,a){},fbc1:function(e){e.exports=JSON.parse('{"quizzes":[{"ID":1,"title":"Statics","totalMark":10},{"ID":2,"title":"Related Time Rates","totalMark":15},{"ID":3,"title":"Limits","totalMark":10},{"ID":4,"title":"Behavior of Functions","totalMark":10},{"ID":5,"title":"Midterm","totalMark":30}],"grades":[{"1":8,"2":14,"3":7,"4":10,"5":26,"total":65,"user":{"ID":1,"fullName":"Demo User","username":"demo_user","phoneNumber":"01111111111","parentNumber":"012222222222"}}]}')}});
//# sourceMappingURL=app.87c38a63.js.map